Only in /usr/CVS_KDE/kdewebdev/quanta/components/csseditor/: .cvsignore
diff --recursive -uP /usr/CVS_KDE/kdewebdev/quanta/components/csseditor/Makefile.am /home/simone/Desktop/kdewebdev/quanta/components/csseditor/Makefile.am
--- /usr/CVS_KDE/kdewebdev/quanta/components/csseditor/Makefile.am	2004-09-14 23:12:42.000000000 +0200
+++ /home/simone/Desktop/kdewebdev/quanta/components/csseditor/Makefile.am	2004-08-19 20:46:35.000000000 +0200
@@ -4,8 +4,8 @@
 
 libcsseditor_la_SOURCES = fontfamilychoosers.ui cssselectors.ui csseditors.ui \
 	fontfamilychooser.cpp cssselector.cpp csseditor.cpp specialsb.cpp doubleeditors.cpp \
-	qmyhighlighter.cpp colorrequester.cpp propertysetter.cpp shorthandformer.cpp \
-	csseditor_globals.cpp tlpeditors.cpp styleeditor.cpp cssshpropertyparser.cpp 
+	qmyhighlighter.cpp colorrequester.cpp propertysetter.cpp shorthandformer.cpp colorslider.cpp \
+	csseditor_globals.cpp tlpeditors.cpp styleeditor.cpp stylesheetparser.cpp cssshpropertyparser.cpp percentageeditor.cpp
 
 libcsseditor_la_METASOURCES = AUTO
 
diff --recursive -uP /usr/CVS_KDE/kdewebdev/quanta/components/csseditor/colorrequester.cpp /home/simone/Desktop/kdewebdev/quanta/components/csseditor/colorrequester.cpp
--- /usr/CVS_KDE/kdewebdev/quanta/components/csseditor/colorrequester.cpp	2004-07-28 19:02:15.000000000 +0200
+++ /home/simone/Desktop/kdewebdev/quanta/components/csseditor/colorrequester.cpp	2004-08-10 10:48:17.000000000 +0200
@@ -9,6 +9,8 @@
 #include <klocale.h>
 #include <kaccel.h>
 
+#include "propertysetter.h"
+
 class colorRequester::colorRequesterPrivate{
   public:
     KLineEdit *edit;
@@ -17,15 +19,20 @@
     void connectSignals( QObject *receiver ) { connect( edit, SIGNAL( textChanged( const QString& )),receiver, SIGNAL( textChanged( const QString& ))); }
 };
 
-colorRequester::colorRequester(QWidget *parent, const char* name) : QHBox(parent,name){
+colorRequester::colorRequester(QWidget *parent, const char* name) : miniEditor(parent,name){
   d = new colorRequesterPrivate;
   init();
 }
+
 colorRequester::~colorRequester(){
   delete myColorDialog;
   delete d;
 }
 
+void colorRequester::connectToPropertySetter(propertySetter* p){
+  connect( this, SIGNAL(textChanged(const QString&)), p, SIGNAL(valueChanged(const QString&)));
+}
+
 void colorRequester::init()
 {
      myColorDialog    = 0L;
@@ -48,7 +55,7 @@
      d->connectSignals( this );
      connect( myButton, SIGNAL( clicked() ), this, SLOT( openColorDialog() ));
      connect( d->edit, SIGNAL( textChanged ( const QString & ) ), this, SLOT( setInitialValue(/*const QString&*/ ) ));
-
+ 
      KAccel *accel = new KAccel( this );
      accel->insert( KStdAccel::Open, this, SLOT( openColorDialog() ));
      accel->readSettings();
@@ -63,7 +70,7 @@
    emit textChanged(myColor.name());
  }
 }
-
+ 
 KLineEdit * colorRequester::lineEdit() const{
   return d->edit;
 }
@@ -71,7 +78,7 @@
 void colorRequester::setInitialValue(/*const QString& s*/){
   QString temp = d->edit->text();
   temp.remove(" ");
- if( temp.contains("#") != 0){
+ if( temp.contains("#") != 0){  
    temp.remove("#");
    if(temp.length() == 3) {
      QString temp2;
@@ -90,18 +97,18 @@
    m_initialValue.setRgb(r,g,b);
  }
  else
-
+ 
    if( temp.contains("rgb(") != 0){
      temp.remove("rgb(").remove(")");
      QStringList rgbValues = QStringList::split(",",temp);
-//      bool ok;
+     bool ok;
      int r = rgbValues[0].toInt();
      int g = rgbValues[1].toInt();
      int b = rgbValues[2].toInt();
      m_initialValue.setRgb(r,g,b);
    }
    else
-      m_initialValue.setNamedColor(d->edit->text());
+      m_initialValue.setNamedColor(d->edit->text());   
 }
 
 #include "colorrequester.moc"
diff --recursive -uP /usr/CVS_KDE/kdewebdev/quanta/components/csseditor/colorrequester.h /home/simone/Desktop/kdewebdev/quanta/components/csseditor/colorrequester.h
--- /usr/CVS_KDE/kdewebdev/quanta/components/csseditor/colorrequester.h	2004-09-14 23:12:42.000000000 +0200
+++ /home/simone/Desktop/kdewebdev/quanta/components/csseditor/colorrequester.h	2004-08-10 10:48:27.000000000 +0200
@@ -1,18 +1,21 @@
 #ifndef COLORREQUESTER_H
 #define COLORREQUESTER_H
-#include <qhbox.h>
+
 #include <kpushbutton.h>
 #include <qcolor.h>
 
+#include "minieditor.h"
+
 class KLineEdit;
 class KColorDialog;
-class colorRequester : public QHBox{
+class colorRequester : public miniEditor{
     Q_OBJECT
   public:
     colorRequester(QWidget *parent, const char* name=0);
     ~colorRequester();
     KLineEdit * lineEdit() const;
     KPushButton * button() const { return myButton; }
+    virtual void connectToPropertySetter(propertySetter* p);
     //void setInitialValue(const QString&);
   public slots:
     void openColorDialog();
diff --recursive -uP /usr/CVS_KDE/kdewebdev/quanta/components/csseditor/colorslider.cpp /home/simone/Desktop/kdewebdev/quanta/components/csseditor/colorslider.cpp
--- /usr/CVS_KDE/kdewebdev/quanta/components/csseditor/colorslider.cpp	1970-01-01 01:00:00.000000000 +0100
+++ /home/simone/Desktop/kdewebdev/quanta/components/csseditor/colorslider.cpp	2004-08-09 18:47:18.000000000 +0200
@@ -0,0 +1,85 @@
+/***************************************************************************
+                          colorslider.cpp  -  description
+                             -------------------
+    begin                : lun  ago 9 2004
+    copyright            : (C) 2004 by gulmini luciano
+    email                : gulmini.luciano@student.unife.it
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#include <qvbox.h>
+#include <qlabel.h>
+
+#include <klocale.h>
+
+#include "colorslider.h"
+#include "propertysetter.h"
+
+/**
+  *@author gulmini luciano
+  */
+
+  
+
+colorSlider::colorSlider(const QString& fn,const QString& l,const QString& c,const QString& r,QWidget *parent, const char *name) : miniEditor(parent,name)  { 
+  m_functionName = fn;
+  QVBox *leftBox = new QVBox(this);
+  QVBox *centerBox = new QVBox(this);
+  QVBox *rightBox = new QVBox(this);
+  QLabel *leftLabel = new QLabel("<b>" +  l +"</b>",leftBox);
+  QLabel *centerLabel = new QLabel(("<b>" +  c +"</b>"),centerBox);
+  QLabel *rightLabel = new QLabel(("<b>" +  r +"</b>"),rightBox);
+  leftLabel->setAlignment(Qt::AlignHCenter);
+  centerLabel->setAlignment(Qt::AlignHCenter);
+  rightLabel->setAlignment(Qt::AlignHCenter);  
+  leftLabel->setTextFormat (Qt::RichText ) ;
+  centerLabel->setTextFormat ( Qt::RichText ) ;
+  rightLabel->setTextFormat (Qt::RichText  ) ;
+  m_leftValue = new QSlider ( 0, 255, 1, 0, Qt::Horizontal , leftBox);
+  m_centerValue = new QSlider ( 0, 255, 1, 0, Qt::Horizontal , centerBox);
+  m_rightValue = new QSlider ( 0, 255, 1, 0, Qt::Horizontal , rightBox);
+  setSpacing(10);
+  connect(m_leftValue, SIGNAL(valueChanged ( int)), this, SLOT(convertLeftValue(int)));
+  connect(m_centerValue, SIGNAL(valueChanged ( int)), this, SLOT(convertCenterValue(int)));
+  connect(m_rightValue, SIGNAL(valueChanged ( int)), this, SLOT(convertRightValue(int)));
+}
+
+colorSlider::~colorSlider(){
+  //delete m_redValue;
+  //delete m_greenValue;
+  //delete m_blueValue; 
+}
+
+void colorSlider::connectToPropertySetter(propertySetter* p){
+  connect( this, SIGNAL(valueChanged(const QString&)), p, SIGNAL(valueChanged(const QString&)));
+}
+
+void colorSlider::convertLeftValue(int i){
+  emit valueChanged(m_functionName + "(" + QString::number(i,10) + "," + QString::number(m_centerValue->value(),10) + "," +QString::number(m_rightValue->value(),10) +")");
+}
+
+void colorSlider::convertCenterValue(int i){
+  emit valueChanged(m_functionName + "(" +  QString::number(m_leftValue->value(),10) + "," + QString::number(i,10) + "," + QString::number(m_rightValue->value(),10) +")");
+}
+
+void colorSlider::convertRightValue(int i){
+  emit valueChanged(m_functionName + "(" + QString::number(m_leftValue->value(),10) + "," + QString::number(m_centerValue->value(),10) + "," + QString::number(i,10) +")");
+}
+
+RGBcolorSlider::RGBcolorSlider(QWidget *parent, const char *name) : colorSlider("rgb",i18n("Red"),i18n("Green"),i18n("Blue"),parent,name){
+}
+
+//FOR CSS3
+/*HSLcolorSlider::HSLcolorSlider(QWidget *parent, const char *name) : colorSlider("hsl",i18n("Hue"),i18n("Saturation"),i18n("Lightness"),parent,name){
+}
+*/
+
+#include "colorslider.moc"
diff --recursive -uP /usr/CVS_KDE/kdewebdev/quanta/components/csseditor/colorslider.h /home/simone/Desktop/kdewebdev/quanta/components/csseditor/colorslider.h
--- /usr/CVS_KDE/kdewebdev/quanta/components/csseditor/colorslider.h	1970-01-01 01:00:00.000000000 +0100
+++ /home/simone/Desktop/kdewebdev/quanta/components/csseditor/colorslider.h	2004-08-09 18:45:57.000000000 +0200
@@ -0,0 +1,69 @@
+/***************************************************************************
+                          colorslider.h  -  description
+                             -------------------
+    begin                : lun  ago 9 2004
+    copyright            : (C) 2004 by gulmini luciano
+    email                : gulmini.luciano@student.unife.it
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#ifndef COLORSLIDER_H
+#define COLORSLIDER_H
+
+#include <qslider.h>
+
+#include "minieditor.h"
+
+
+
+/**
+  *@author gulmini luciano
+  */
+
+class colorSlider : public miniEditor  {
+     Q_OBJECT
+   private :
+    QString m_functionName;  
+   protected:
+     QSlider *m_leftValue,
+                  *m_centerValue,
+                  *m_rightValue;
+   public:
+           colorSlider(const QString& functionName,const QString& l=QString::null,const QString& c=QString::null,const QString& r=QString::null,QWidget *parent=0, const char *name=0);
+           virtual ~colorSlider();
+           virtual void connectToPropertySetter(propertySetter* p);
+  
+   private slots: 
+     void convertLeftValue(int i);  
+     void convertCenterValue(int i);
+     void convertRightValue(int i);  
+              
+   signals:
+     void valueChanged(const QString&);
+};  
+
+class RGBcolorSlider : public colorSlider  {
+     Q_OBJECT
+   public:
+           RGBcolorSlider(QWidget *parent=0, const char *name=0);
+           ~RGBcolorSlider(){}         
+};
+
+//FOR CSS3
+/*class HSLcolorSlider : public colorSlider  {
+     Q_OBJECT
+   public:
+           HSLcolorSlider(QWidget *parent=0, const char *name=0);
+           ~HSLcolorSlider();             
+};*/
+  
+
+#endif
diff --recursive -uP /usr/CVS_KDE/kdewebdev/quanta/components/csseditor/csseditor.cpp /home/simone/Desktop/kdewebdev/quanta/components/csseditor/csseditor.cpp
--- /usr/CVS_KDE/kdewebdev/quanta/components/csseditor/csseditor.cpp	2004-09-14 23:12:44.000000000 +0200
+++ /home/simone/Desktop/kdewebdev/quanta/components/csseditor/csseditor.cpp	2004-09-03 16:06:31.000000000 +0200
@@ -16,33 +16,36 @@
  ***************************************************************************/
 
 #include "csseditor.h"
-#include <qlistview.h>
 #include <qlayout.h>
 #include <qtabwidget.h>
-#include <qfile.h>
 #include <qpushbutton.h>
 #include <qcheckbox.h>
-#include <qlineedit.h>
 #include <qtextedit.h>
-#include <qregexp.h>
 #include <qtextstream.h>
-#include <qmap.h>
 #include <qfileinfo.h>
 
 #include <klocale.h>
 #include <khtml_part.h>
 #include <khtmlview.h>
 #include <kstandarddirs.h>
+#include <klineedit.h>
 #include <kdebug.h>
+#include <kconfig.h>
+#include <kparts/browserextension.h>
 
 #include "propertysetter.h"
 #include "qmyhighlighter.h"
 #include "resource.h"
 #include "cssshpropertyparser.h"
 #include "shorthandformer.h"
-#include "resource.h"
 #include "quanta.h"
+#include "percentageeditor.h"
+#include "colorslider.h"
 #include "tlpeditors.h"
+#include "doubleeditors.h"
+#include "specialsb.h"
+#include "colorrequester.h"
+
 
 
 myCheckListItem::myCheckListItem(QListView * parent, const QString & text):QCheckListItem(parent, text, QCheckListItem::CheckBox),m_checkedChildren(0){
@@ -52,6 +55,7 @@
 myCheckListItem::myCheckListItem(QCheckListItem * parent, const QString & text):QCheckListItem(parent, text, QCheckListItem::CheckBox),m_checkedChildren(0){
   m_sig = new QSignal;
 }
+
 myCheckListItem::~myCheckListItem(){
   delete m_sig;
 }
@@ -76,7 +80,7 @@
        while( child ) {
          m_sig->setValue(QVariant(child->text(0)));
          m_sig->activate();
-         static_cast<myCheckListItem*>(child)->setOn(false);
+         static_cast<myCheckListItem*>(child)->setOn(false);    
          child = child->nextSibling();
        }
        m_checkedChildren = 0;
@@ -174,20 +178,24 @@
    static_cast<myCheckListItem*>(lvVisual->findItem( "border-left-"+s,0 ))->setOn(true);  
  }
  
- void CSSEditor::hidePreviewer(){ 
-   m_previewer->view()->hide(); 
-   fPreview->setEnabled(false);
+void CSSEditor::hidePreviewer(){ 
+  fPreview->hide();
  }
  
-void CSSEditor::initialize()
-{
+void CSSEditor::initialize(){
+
+   
+  connect(pbOk, SIGNAL(clicked()), this, SLOT(toggleShortendForm()));
+  quantaApp->config()->setGroup("CSSEditor Options");
+  SHckb->setChecked(quantaApp->config()->readBoolEntry("Shorthand form enabled",false));
+  
   QString configFile = locate("appdata", "csseditor/config.xml");
 
   m_myhi = new QMyHighlighter(display);
-  display->setReadOnly(true);
 
   QBoxLayout *fPreviewLayout = new QBoxLayout(fPreview,QBoxLayout::LeftToRight);
   m_previewer=new KHTMLPart(fPreview);
+  
   fPreviewLayout->addWidget(m_previewer->view());
 
   QFile file( configFile );
@@ -245,7 +253,7 @@
   if( !m_selectorName.isEmpty() ){ //the cssselector has been called
      m_initialProperties = m_initialProperties.stripWhiteSpace();
      props=QStringList::split(";",m_initialProperties);
-     temp=(m_selectorName + " {\n\t");
+     temp= m_selectorName + " {\n\t" ;
    }
 
   else {
@@ -260,7 +268,7 @@
        const QString propertyValue((*it).section(":",1,1));
 
       if( ShorthandFormer::SHFormList().contains(propertyName)==0 ) {
-         temp+=( propertyName + " : " + propertyValue +";\n\t");
+         temp+= propertyName + " : " + propertyValue +";\n\t";
          addAndSetPropertyOn(propertyName,propertyValue);
       }
     else{
@@ -275,21 +283,25 @@
     }
     }
     temp.truncate(temp.length()-1);
+    //temp.chop(1);
     if(normalMode)//normal mode editing
       temp+="}";
     display->setText(temp);
     activatePreview();
 }
 
+void CSSEditor::toggleShortendForm()
+{
+ quantaApp->config()->setGroup("CSSEditor Options");
+ quantaApp->config()->writeEntry("Shorthand form enabled", SHckb->isChecked());
+ quantaApp->config()->sync();
+}
+
 CSSEditor::CSSEditor(QListViewItem *i, QWidget *parent, const char *name) : CSSEditorS(parent, name){
   m_selectorName = i->text(0);
   m_initialProperties = i->text(1);
 }
 
-CSSEditor::CSSEditor( QString s, QWidget* parent, const char *name) : CSSEditorS(parent, name){
-  m_selectorName = s;
-}
-
 CSSEditor::~CSSEditor() {
     delete m_myhi;
     delete m_ps;
@@ -310,8 +322,10 @@
       
       if(valueTypeName =="list") {
         m_ps->setComboBox();
-        m_ps->ComboBox()->insertStringList(QStringList::split(",",curr.attribute("value")));
+        QStringList values = QStringList::split(",",curr.attribute("value"));
+        m_ps->ComboBox()->insertStringList(values);
         if(m_properties.contains(m_currentProp->text(0)) !=0 )
+          if( values.contains(m_currentProp->text(0)))
             m_ps->ComboBox()->setCurrentText(m_properties[m_currentProp->text(0)]); 
         if(curr.attribute("editable") == "yes"){
           m_ps->ComboBox()->setEditable(true);
@@ -345,98 +359,138 @@
       }
       else           
       if( valueTypeName == "length") {
+        lengthEditor *editor = new lengthEditor(m_ps);
         if(m_properties.contains(m_currentProp->text(0)) !=0 )
-          m_ps->setLengthEditor(m_properties[m_currentProp->text(0)]);  
-        else m_ps->setLengthEditor();   
+          editor->setInitialValue(m_properties[m_currentProp->text(0)]);   
+        else 
+          editor->setInitialValue(QString::null); 
+        m_ps->installMiniEditor(editor);
       }
       else
       if( valueTypeName == "percentage") {
-        if(m_properties.contains(m_currentProp->text(0)) !=0 )
-          m_ps->setPercentageEditor(m_properties[m_currentProp->text(0)]);
-        else m_ps->setPercentageEditor();  
+        if(m_properties.contains(m_currentProp->text(0)) !=0 ){
+          percentageEditor *editor = new percentageEditor(m_properties[m_currentProp->text(0)],m_ps);
+          m_ps->installMiniEditor(editor);
+        }
+        else {
+          percentageEditor *editor = new percentageEditor("0",m_ps);
+          m_ps->installMiniEditor(editor);
+        } 
       }
       else
       if( valueTypeName == "doubleLength") {
-        if(m_properties.contains(m_currentProp->text(0)) !=0 )
-          m_ps->setDoubleLengthEditor(m_properties[m_currentProp->text(0)]);
-        else m_ps->setDoubleLengthEditor();  
+        doubleLengthEditor *editor = new doubleLengthEditor(m_ps);
+        
+        if(m_properties.contains(m_currentProp->text(0)) !=0 ){
+          QString temp(m_properties[m_currentProp->text(0)].simplifyWhiteSpace()),
+                       sx(temp.section(" ",0,0)),
+                       dx(temp.section(" ",1,1));
+
+          editor->setInitialValue(sx,dx);
+        }
+        else editor->setInitialValue(QString::null,QString::null); 
+        m_ps->installMiniEditor(editor);
       }
       else
       if( valueTypeName == "doublePercentage") {
-        if(m_properties.contains(m_currentProp->text(0)) !=0 )
-          m_ps->setDoublePercentageEditor(m_properties[m_currentProp->text(0)]);  
-        else m_ps->setDoublePercentageEditor();  
+        doublePercentageEditor *editor = new doublePercentageEditor(m_ps);
+        
+        if(m_properties.contains(m_currentProp->text(0)) !=0 ){
+          QString temp(m_properties[m_currentProp->text(0)].simplifyWhiteSpace()),
+                       sx(temp.section(" ",0,0)),
+                       dx(temp.section(" ",1,1));
+
+          editor->setInitialValue(sx,dx);
+        }
+        else editor->setInitialValue(QString::null,QString::null);
+        m_ps->installMiniEditor(editor);
       }
       else
       if( valueTypeName == "frequency") {
+        frequencyEditor *editor = new frequencyEditor(m_ps);
         if(m_properties.contains(m_currentProp->text(0)) !=0 )
-          m_ps->setFrequencyEditor(m_properties[m_currentProp->text(0)]); 
-        else m_ps->setFrequencyEditor();  
+          editor->setInitialValue(m_properties[m_currentProp->text(0)]);
+        else 
+          editor->setInitialValue(QString::null); 
+        m_ps->installMiniEditor(editor);
       }
       else
       if( valueTypeName == "time") {
+        timeEditor *editor = new timeEditor(m_ps);
         if(m_properties.contains(m_currentProp->text(0)) !=0 )
-          m_ps->setTimeEditor(m_properties[m_currentProp->text(0)]);
-        else m_ps->setTimeEditor();  
+          editor->setInitialValue(m_properties[m_currentProp->text(0)]);
+        else 
+          editor->setInitialValue(QString::null); 
+        m_ps->installMiniEditor(editor);
       }     
       else
       if( valueTypeName == "angle") {
-        if(m_properties.contains(m_currentProp->text(0)) !=0 )
-          m_ps->setAngleEditor(m_properties[m_currentProp->text(0)]); 
-        else m_ps->setAngleEditor();  
+        angleEditor *editor = new angleEditor(m_ps);
+        if(m_properties.contains(m_currentProp->text(0)) !=0 )       
+         editor->setInitialValue(m_properties[m_currentProp->text(0)]);
+        else 
+          editor->setInitialValue(QString::null); 
+        m_ps->installMiniEditor(editor);
       }    
-      /*else
-      if( valueTypeName == "edit") {
-        m_ps->ComboBox()->setEditable(true);
-        m_ps->ComboBox()->lineEdit()->clear();
-      }*/
-      else
-      if( valueTypeName == "uri") {
-        m_ps->setUriEditor();
-        if(curr.attribute("mode") == "multi") m_ps->UriEditor()->setMode(URIEditor::Multi);
+      else
+      if( valueTypeName == "freeedit") {
+        m_ps->setLineEdit();
+      }
+      else
+      if( valueTypeName == "uri") {  
+        URIEditor *editor = new URIEditor(m_ps);      
+
+        if(curr.attribute("mode") == "multi") editor->setMode(URIEditor::Multi);
+        else editor->setMode(URIEditor::Single); 
             
-        if(curr.attribute("resourceType") == "audio") m_ps->UriEditor()->setResourceType(URIEditor::audio);
+        if( curr.attribute("resourceType") == "audio") editor->setResourceType(URIEditor::audio);
         else
-           if(curr.attribute("resourceType") == "image") m_ps->UriEditor()->setResourceType(URIEditor::image);  
-           else
-             if(curr.attribute("resourceType") == "mousePointer") m_ps->UriEditor()->setResourceType(URIEditor::mousePointer); 
+          if( curr.attribute("resourceType") == "image") editor->setResourceType(URIEditor::image);  
+          else
+            if( curr.attribute("resourceType") == "mousePointer") editor->setResourceType(URIEditor::mousePointer);  
+      
+        m_ps->installMiniEditor(editor);             
       }      
       else
       if( valueTypeName == "colors") {
+        RGBcolorSlider *RGBeditor = new RGBcolorSlider(m_ps);
+        colorRequester *CReditor = new colorRequester(m_ps);
         if(m_properties.contains(m_currentProp->text(0)) !=0 ){
-          m_ps->setColorRequester(m_properties[m_currentProp->text(0)]);
-          m_ps->setPredefinedColorListEditor(m_properties[m_currentProp->text(0)]);
-        }
-        else {
-          m_ps->setColorRequester();
-          m_ps->setPredefinedColorListEditor();
+          CReditor->lineEdit()->setText(m_properties[m_currentProp->text(0)]);
+          CReditor->setInitialValue();
+          
         }
         
+        m_ps->installMiniEditor(CReditor);
+        m_ps->setPredefinedColorListEditor();
+        m_ps->installMiniEditor(RGBeditor);        
       }         
       else
       if( valueTypeName =="doubleList") {
-        m_ps->setDoubleComboBoxEditor();
-        m_ps->DoubleComboBoxEditor()->cbSx()->insertStringList(QStringList::split(",",curr.firstChild().toElement().attribute("value")));
-        m_ps->DoubleComboBoxEditor()->cbDx()->insertStringList(QStringList::split(",",curr.lastChild().toElement().attribute("value")));          
+        doubleComboBoxEditor *editor = new doubleComboBoxEditor(m_ps);
+        editor->cbSx()->insertStringList(QStringList::split(",",curr.firstChild().toElement().attribute("value")));
+        editor->cbDx()->insertStringList(QStringList::split(",",curr.lastChild().toElement().attribute("value")));
+        m_ps->installMiniEditor(editor);          
       } 
       else
         if( valueTypeName == "fontDialog" ){
-          if(m_properties.contains(m_currentProp->text(0)) !=0 )
-            m_ps->setFontEditor(m_properties[m_currentProp->text(0)]);
-          else m_ps->setFontEditor(); 
+          fontEditor *editor = new fontEditor(m_ps);
+          if(m_properties.contains(m_currentProp->text(0)) !=0 ){
+            editor->setInitialValue(m_properties[m_currentProp->text(0)]);
+          }
+          else editor->setInitialValue(QString::null);
+          m_ps->installMiniEditor(editor);
         } 
     }
     m_ps->addButton();
     m_ps->Show();
   }
-  
-  
 }
 
 void CSSEditor::checkProperty(const QString& v){
-  if(!m_currentProp->isOn()) {
+  if(!m_currentProp->isOn()) 
     m_currentProp->setOn(true);
-  }
+  
   if( m_currentProp->depth() ){
     myCheckListItem *p = static_cast<myCheckListItem*>(m_currentProp->parent());
     while(p){
@@ -534,10 +588,7 @@
                    addProperty("border-left-style",values[3]);break;
     }
   }
-  else
-  
-  
-  addProperty(m_currentProp->text(0),v);
+  else addProperty(m_currentProp->text(0),v);
   emit signalUpdatePreview();
 }
 
@@ -550,8 +601,7 @@
   connect(lvPaged,SIGNAL( selectionChanged( QListViewItem *  )),this,SLOT(setMiniEditors ( QListViewItem *  )));
 }
 
-void CSSEditor::removeProperty(const QVariant& v)
-{
+void CSSEditor::removeProperty(const QVariant& v){
   m_properties.remove(v.toString());
   updatePreview();
 }
@@ -560,8 +610,10 @@
   QString props;
   QMap<QString,QString>::Iterator it;
   if(!SHckb->isChecked()) {
-    for ( it = m_properties.begin(); it != m_properties.end(); ++it ) props+=( it.key() + " : " + it.data().stripWhiteSpace() + "; " );
+    for ( it = m_properties.begin(); it != m_properties.end(); ++it ) 
+      props+= it.key() + " : " + it.data().stripWhiteSpace() + "; " ;
     props.truncate(props.length()-1);//the last white space creates some problems: better remove it
+    //props.chop(1);
     return props;
   }
   else {    
@@ -570,58 +622,76 @@
   }
 }
 
-void CSSEditor::updatePreview()
-{
-    updateDisplay();
-    activatePreview();
+void CSSEditor::updatePreview(){
+  updateDisplay();
+  activatePreview();
 }
 
 void CSSEditor::activatePreview() {
+  if(!m_isFileToPreviewExternal){
+   QString testHeader,
+                 testFooter,
+                 testBody;
+        
+    if(!m_selectorName.isEmpty()) {
+      testHeader +=  m_selectorName + " { \n ";
+      testFooter =  "\n}"  + m_Selectors;
+    }
+    else {
+      testHeader += " style=\"" ;
+      testFooter = "\"" ;
+    }
+  
+    QMap<QString,QString>::Iterator it;
+    for ( it = m_properties.begin(); it != m_properties.end(); ++it ) 
+      testBody+= it.key() + " : " + it.data() + ";";
 
-  QString testHeader,
-               testFooter,
-               testBody;
-
-  if(!m_selectorName.isEmpty()) {
-    testHeader += (  m_selectorName + " { \n " );
-    testFooter = ( "}"  + m_Selectors );
-  }
+    m_previewer->begin( KURL(m_fileToPreview) );
+    m_previewer->write( m_Header +  testHeader + testBody+ testFooter+ m_Footer);
+    m_previewer->end(); 
+
+    
+  }   
   else {
-    testHeader += (" style=\"" );
-    testFooter = "\"" ;
-  }
-  
-  QMap<QString,QString>::Iterator it;
-  for ( it = m_properties.begin(); it != m_properties.end(); ++it ) {
-    QString s( it.key() + " : " + it.data() + ";");
-    testBody+= s;
-   } 
-
- QFileInfo fi(quantaApp->currentURL());
- m_previewer->begin( KURL(quantaApp->projectBaseURL().path() +  fi.baseName() ) );
- m_previewer->write( m_Header + testHeader + testBody + testFooter + m_Footer);
- m_previewer->end(); 
+    QString tmp("{"); 
+    QFile file(m_fileToPreview);      
+    if ( file.open( IO_ReadOnly ) ) {                    
+        QMap<QString,QString>::Iterator it;        
+        for ( it = m_properties.begin(); it != m_properties.end(); ++it ) 
+          tmp+= it.key() + " : " + it.data() + ";";
+         
+        
+        QFileInfo fi(m_fileToPreview);
+        KParts::URLArgs a;
+        if(fi.extension().lower() == "xml" or fi.extension().lower() == "xhtml")
+          a.serviceType="text/xml";
+        if(fi.extension().lower() == "html" or fi.extension().lower() == "html")
+          a.serviceType="text/xml";   
+        m_previewer->browserExtension()->setURLArgs(a);
+        QTextStream stream( &file ); 
+        
+        m_previewer->begin(KURL(m_fileToPreview));       
+        m_previewer->write(stream.read());
+        m_previewer->end(); 
+        m_previewer->setUserStyleSheet(m_externalStyleSheetDefinition + " " + m_selectorName+" "+ tmp +"}");         
+        file.close();
+    }
+   //else KMessageBox::sorry(this,i18n("The css file you want to edit can't be opened"));  
+  }  
 }
 
-void CSSEditor::updateDisplay()
-{
+void CSSEditor::updateDisplay(){  
   QString toDisplay;
-  bool normalMode = true;
-
-  if(!m_selectorName.isEmpty()){// we're working on <style></style> block
-      toDisplay= ( m_selectorName +" {\n\t" );
-  }
-  else {
-      normalMode = false;
-      toDisplay = "\n\t";
-   }
   QMap<QString,QString>::Iterator it;
-  for ( it = m_properties.begin(); it != m_properties.end(); ++it ) {
-    QString s( it.key() + " : " + it.data() + ";");
-    toDisplay += (s + "\n\t");
-  }
-  if(normalMode)//normal mode editing
+  for ( it = m_properties.begin(); it != m_properties.end(); ++it ) 
+    toDisplay += it.key() + " : " + it.data() + ";\n\t";
+  
+  if(!m_selectorName.isEmpty()){// we're working on <style></style> block
+    toDisplay.prepend(m_selectorName +" {\n\t");
     toDisplay+="}";
+  }    
+  else  toDisplay.prepend("\n\t");
+       
   display->setText(toDisplay);
 }
 
diff --recursive -uP /usr/CVS_KDE/kdewebdev/quanta/components/csseditor/csseditor.h /home/simone/Desktop/kdewebdev/quanta/components/csseditor/csseditor.h
--- /usr/CVS_KDE/kdewebdev/quanta/components/csseditor/csseditor.h	2004-09-14 23:12:44.000000000 +0200
+++ /home/simone/Desktop/kdewebdev/quanta/components/csseditor/csseditor.h	2004-08-20 11:36:10.000000000 +0200
@@ -20,13 +20,11 @@
 
 #include <qwidget.h>
 #include "csseditors.h"
-#include <qstringlist.h>
 #include <qdom.h>
 #include <qmap.h>
 #include <qlistview.h>
 #include <qsignal.h>
 
-class QListViewItem;
 class propertySetter;
 class KHTMLPart;
 class QListViewItem;
@@ -69,8 +67,12 @@
                  m_Selectors,
                  m_Header,
                  m_Footer,
-                 m_InlineStyleContent;
-                        
+                 
+                 m_InlineStyleContent,
+                 m_externalStyleSheetDefinition,
+                 m_fileToPreview;
+      
+     bool m_isFileToPreviewExternal;                              
             //sourceFileName;   
    
     void Connect();
@@ -88,22 +90,22 @@
     void removeProperty(const QVariant&); 
     void updatePreview();
     void setMiniEditors(QListViewItem*);
+    void toggleShortendForm();
     
   public:
     
     CSSEditor(QWidget* parent=0, const char *name=0){};
     CSSEditor( QListViewItem * i, QWidget* parent=0, const char *name=0);
-    CSSEditor( QString s, QWidget* parent=0, const char *name=0);
     ~CSSEditor(); 
     void initialize();
     void setSelectors( const QString& s) { m_Selectors = s; }
     void setHeader( const QString& s) { m_Header = s; }
     void setFooter( const QString& s) { m_Footer = s;}
     void setInlineStyleContent( const QString& s){ m_InlineStyleContent = s; }
-    void setForInitialPreview(const QString& s) { Q_UNUSED(s); } 
     QString generateProperties();
-    // void setSourceFileName(const QString& n) { sourceFileName = n; }
     void hidePreviewer();
+    void setFileToPreview(const QString& s,bool b) { m_fileToPreview = s; m_isFileToPreviewExternal = b;}                                                                         
+    void setExternalStyleSheetDefinition(const QString& s) { m_externalStyleSheetDefinition = s;}
 
   signals:
     void signalUpdatePreview();
diff --recursive -uP /usr/CVS_KDE/kdewebdev/quanta/components/csseditor/csseditor_globals.h /home/simone/Desktop/kdewebdev/quanta/components/csseditor/csseditor_globals.h
--- /usr/CVS_KDE/kdewebdev/quanta/components/csseditor/csseditor_globals.h	2004-09-14 23:12:45.000000000 +0200
+++ /home/simone/Desktop/kdewebdev/quanta/components/csseditor/csseditor_globals.h	2004-06-23 17:33:23.000000000 +0200
@@ -28,7 +28,7 @@
                                    "darkkhaki,darkmagenta,darkolivegreen,darkorange,darkorchid,darkred,darksalmon,"
                                    "darkseagreen,darkslateblue,darkslategray,darkturquoise,darkviolet,deeppink,"
                                    "deepskyblue,dimgray,dodgerblue,firebrick,floralwhite,forestgreen,fuchsia,gainsboro,"
-                                   "ghostwhite,gold,goldenrod,gray,grey,green,greenyellow,honeydew,hotpink,indianred,"
+                                   "ghostwhite,gold,goldenrod,gray,green,greenyellow,honeydew,hotpink,indianred,"
                                    "indigo,ivory,khaki,lavender,lavenderblush,lawngreen,lemonchiffon,lightblue,lightcoral,"
                                    "lightcyan,lightgoldenrodyellow,lightgreen,lightgrey,lightpink,lightsalmon,lightseagreen,"
                                    "lightskyblue,lightslategray,lightsteelblue,lightyellow,lime,limegreen,linen,magenta,"
@@ -40,15 +40,15 @@
                                    "salmon,sandybrown,seagreen,seashell,sienna,silver,skyblue,slateblue,slategray,snow,"
                                    "springgreen,steelblue,tan,teal,thistle,tomato,turquoise,violet,wheat,white,whitesmoke,"
                                    "yellow,yellowgreen")));
+                                   
 
-
-  const QStringList lengthUnits(QStringList::split(",",QString("cm,em,ex,in,mm,pc,pt,px")));
+  const QStringList lengthUnits(QStringList::split(",",QString("cm,em,ex,in,mm,pc,pt,px"))); 
   const QStringList frequencyUnits(QStringList::split(",",QString("Hz,kHz")));
   const QStringList angleUnits(QStringList::split(",",QString("deg,rad,grad")));
   const QStringList timeUnits(QStringList::split(",",QString("s,ms")));
-};
-
+};                                                                   
 
+                                                                   
 class mySpinBox : public QSpinBox{
     Q_OBJECT
   public:
@@ -56,8 +56,8 @@
     mySpinBox( int minValue, int maxValue, int step = 1, QWidget * parent = 0, const char * name = 0 );
     ~mySpinBox();
   public slots:
-    void checkSuffix(const QString&);
+    void checkSuffix(const QString&);  
 };
 
-
+                                                          
 #endif
diff --recursive -uP /usr/CVS_KDE/kdewebdev/quanta/components/csseditor/csseditors.ui /home/simone/Desktop/kdewebdev/quanta/components/csseditor/csseditors.ui
--- /usr/CVS_KDE/kdewebdev/quanta/components/csseditor/csseditors.ui	2004-09-14 23:12:45.000000000 +0200
+++ /home/simone/Desktop/kdewebdev/quanta/components/csseditor/csseditors.ui	2004-09-05 18:09:30.000000000 +0200
@@ -1,4 +1,4 @@
-<!DOCTYPE UI><UI version="3.1" stdsetdef="1">
+<!DOCTYPE UI><UI version="3.3" stdsetdef="1">
 <class>CSSEditorS</class>
 <widget class="QDialog">
     <property name="name">
@@ -15,13 +15,33 @@
     <property name="caption">
         <string>CSS Editor</string>
     </property>
+    <property name="sizeGripEnabled">
+        <bool>true</bool>
+    </property>
     <grid>
         <property name="name">
             <cstring>unnamed</cstring>
         </property>
-        <widget class="QLayoutWidget" row="1" column="0">
+        <spacer row="2" column="1">
+            <property name="name">
+                <cstring>spacer1</cstring>
+            </property>
+            <property name="orientation">
+                <enum>Horizontal</enum>
+            </property>
+            <property name="sizeType">
+                <enum>Expanding</enum>
+            </property>
+            <property name="sizeHint">
+                <size>
+                    <width>280</width>
+                    <height>20</height>
+                </size>
+            </property>
+        </spacer>
+        <widget class="QLayoutWidget" row="2" column="2">
             <property name="name">
-                <cstring>layout7</cstring>
+                <cstring>layout6</cstring>
             </property>
             <hbox>
                 <property name="name">
@@ -29,249 +49,270 @@
                 </property>
                 <widget class="QPushButton">
                     <property name="name">
-                        <cstring>pbHelp</cstring>
+                        <cstring>pbOk</cstring>
+                    </property>
+                    <property name="sizePolicy">
+                        <sizepolicy>
+                            <hsizetype>0</hsizetype>
+                            <vsizetype>0</vsizetype>
+                            <horstretch>0</horstretch>
+                            <verstretch>0</verstretch>
+                        </sizepolicy>
                     </property>
                     <property name="text">
-                        <string>&amp;Help</string>
+                        <string>&amp;OK</string>
+                    </property>
+                    <property name="accel">
+                        <string>Alt+O</string>
                     </property>
                 </widget>
-                <spacer>
+                <widget class="QPushButton">
                     <property name="name">
-                        <cstring>spacer1</cstring>
+                        <cstring>pbCancel</cstring>
                     </property>
-                    <property name="orientation">
-                        <enum>Horizontal</enum>
+                    <property name="sizePolicy">
+                        <sizepolicy>
+                            <hsizetype>0</hsizetype>
+                            <vsizetype>0</vsizetype>
+                            <horstretch>0</horstretch>
+                            <verstretch>0</verstretch>
+                        </sizepolicy>
                     </property>
-                    <property name="sizeType">
-                        <enum>Expanding</enum>
-                    </property>
-                    <property name="sizeHint">
-                        <size>
-                            <width>40</width>
-                            <height>20</height>
-                        </size>
+                    <property name="text">
+                        <string>&amp;Cancel</string>
                     </property>
-                </spacer>
-                <widget class="QLayoutWidget">
-                    <property name="name">
-                        <cstring>layout6</cstring>
+                    <property name="accel">
+                        <string>Alt+C</string>
                     </property>
-                    <hbox>
-                        <property name="name">
-                            <cstring>unnamed</cstring>
-                        </property>
-                        <widget class="QPushButton">
-                            <property name="name">
-                                <cstring>pbOk</cstring>
-                            </property>
-                            <property name="text">
-                                <string>&amp;OK</string>
-                            </property>
-                        </widget>
-                        <widget class="QPushButton">
-                            <property name="name">
-                                <cstring>pbCancel</cstring>
-                            </property>
-                            <property name="text">
-                                <string>&amp;Cancel</string>
-                            </property>
-                        </widget>
-                    </hbox>
                 </widget>
             </hbox>
         </widget>
-        <widget class="QSplitter" row="0" column="0">
+        <widget class="QCheckBox" row="1" column="0" rowspan="1" colspan="2">
+            <property name="name">
+                <cstring>SHckb</cstring>
+            </property>
+            <property name="text">
+                <string>Use shorthand form</string>
+            </property>
+            <property name="checked">
+                <bool>false</bool>
+            </property>
+        </widget>
+        <widget class="QSplitter" row="0" column="0" rowspan="1" colspan="3">
             <property name="name">
                 <cstring>splitter3</cstring>
             </property>
+            <property name="frameShape">
+                <enum>NoFrame</enum>
+            </property>
+            <property name="frameShadow">
+                <enum>Plain</enum>
+            </property>
             <property name="orientation">
                 <enum>Horizontal</enum>
             </property>
-            <widget class="QLayoutWidget">
+            <widget class="QTabWidget">
                 <property name="name">
-                    <cstring>layout3</cstring>
+                    <cstring>twMediaGroup</cstring>
                 </property>
-                <vbox>
+                <property name="sizePolicy">
+                    <sizepolicy>
+                        <hsizetype>0</hsizetype>
+                        <vsizetype>7</vsizetype>
+                        <horstretch>0</horstretch>
+                        <verstretch>0</verstretch>
+                    </sizepolicy>
+                </property>
+                <property name="minimumSize">
+                    <size>
+                        <width>33</width>
+                        <height>7</height>
+                    </size>
+                </property>
+                <property name="maximumSize">
+                    <size>
+                        <width>290</width>
+                        <height>32767</height>
+                    </size>
+                </property>
+                <widget class="QWidget">
                     <property name="name">
-                        <cstring>unnamed</cstring>
+                        <cstring>tab</cstring>
                     </property>
-                    <widget class="QTabWidget">
+                    <attribute name="title">
+                        <string>Visual</string>
+                    </attribute>
+                    <grid>
                         <property name="name">
-                            <cstring>twMediaGroup</cstring>
+                            <cstring>unnamed</cstring>
+                        </property>
+                        <property name="margin">
+                            <number>0</number>
                         </property>
-                        <widget class="QWidget">
+                        <widget class="QListView" row="0" column="0">
+                            <column>
+                                <property name="text">
+                                    <string>Properties</string>
+                                </property>
+                                <property name="clickable">
+                                    <bool>false</bool>
+                                </property>
+                                <property name="resizable">
+                                    <bool>false</bool>
+                                </property>
+                            </column>
                             <property name="name">
-                                <cstring>tab</cstring>
+                                <cstring>lvVisual</cstring>
                             </property>
-                            <attribute name="title">
-                                <string>Visual</string>
-                            </attribute>
-                            <grid>
-                                <property name="name">
-                                    <cstring>unnamed</cstring>
-                                </property>
-                                <widget class="QListView" row="0" column="0">
-                                    <column>
-                                        <property name="text">
-                                            <string>Properties</string>
-                                        </property>
-                                        <property name="clickable">
-                                            <bool>false</bool>
-                                        </property>
-                                        <property name="resizable">
-                                            <bool>false</bool>
-                                        </property>
-                                    </column>
-                                    <property name="name">
-                                        <cstring>lvVisual</cstring>
-                                    </property>
-                                    <property name="resizeMode">
-                                        <enum>LastColumn</enum>
-                                    </property>
-                                </widget>
-                            </grid>
-                        </widget>
-                        <widget class="QWidget">
-                            <property name="name">
-                                <cstring>tab</cstring>
+                            <property name="cursor">
+                                <cursor>13</cursor>
+                            </property>
+                            <property name="resizeMode">
+                                <enum>LastColumn</enum>
                             </property>
-                            <attribute name="title">
-                                <string>Paged</string>
-                            </attribute>
-                            <grid>
-                                <property name="name">
-                                    <cstring>unnamed</cstring>
-                                </property>
-                                <widget class="QListView" row="0" column="0">
-                                    <column>
-                                        <property name="text">
-                                            <string>Properties</string>
-                                        </property>
-                                        <property name="clickable">
-                                            <bool>true</bool>
-                                        </property>
-                                        <property name="resizable">
-                                            <bool>true</bool>
-                                        </property>
-                                    </column>
-                                    <property name="name">
-                                        <cstring>lvPaged</cstring>
-                                    </property>
-                                    <property name="resizeMode">
-                                        <enum>AllColumns</enum>
-                                    </property>
-                                </widget>
-                            </grid>
                         </widget>
-                        <widget class="QWidget">
+                    </grid>
+                </widget>
+                <widget class="QWidget">
+                    <property name="name">
+                        <cstring>tab</cstring>
+                    </property>
+                    <attribute name="title">
+                        <string>Paged</string>
+                    </attribute>
+                    <grid>
+                        <property name="name">
+                            <cstring>unnamed</cstring>
+                        </property>
+                        <property name="margin">
+                            <number>0</number>
+                        </property>
+                        <widget class="QListView" row="0" column="0">
+                            <column>
+                                <property name="text">
+                                    <string>Properties</string>
+                                </property>
+                                <property name="clickable">
+                                    <bool>true</bool>
+                                </property>
+                                <property name="resizable">
+                                    <bool>true</bool>
+                                </property>
+                            </column>
                             <property name="name">
-                                <cstring>tab</cstring>
+                                <cstring>lvPaged</cstring>
+                            </property>
+                            <property name="resizeMode">
+                                <enum>AllColumns</enum>
                             </property>
-                            <attribute name="title">
-                                <string>Interactive</string>
-                            </attribute>
-                            <grid>
-                                <property name="name">
-                                    <cstring>unnamed</cstring>
-                                </property>
-                                <widget class="QListView" row="0" column="0">
-                                    <column>
-                                        <property name="text">
-                                            <string>Properties</string>
-                                        </property>
-                                        <property name="clickable">
-                                            <bool>true</bool>
-                                        </property>
-                                        <property name="resizable">
-                                            <bool>true</bool>
-                                        </property>
-                                    </column>
-                                    <property name="name">
-                                        <cstring>lvInteractive</cstring>
-                                    </property>
-                                    <property name="resizeMode">
-                                        <enum>AllColumns</enum>
-                                    </property>
-                                </widget>
-                            </grid>
                         </widget>
-                        <widget class="QWidget">
+                    </grid>
+                </widget>
+                <widget class="QWidget">
+                    <property name="name">
+                        <cstring>tab</cstring>
+                    </property>
+                    <attribute name="title">
+                        <string>Interactive</string>
+                    </attribute>
+                    <grid>
+                        <property name="name">
+                            <cstring>unnamed</cstring>
+                        </property>
+                        <property name="margin">
+                            <number>0</number>
+                        </property>
+                        <widget class="QListView" row="0" column="0">
+                            <column>
+                                <property name="text">
+                                    <string>Properties</string>
+                                </property>
+                                <property name="clickable">
+                                    <bool>true</bool>
+                                </property>
+                                <property name="resizable">
+                                    <bool>true</bool>
+                                </property>
+                            </column>
                             <property name="name">
-                                <cstring>tab</cstring>
+                                <cstring>lvInteractive</cstring>
+                            </property>
+                            <property name="resizeMode">
+                                <enum>AllColumns</enum>
                             </property>
-                            <attribute name="title">
-                                <string>Aural</string>
-                            </attribute>
-                            <grid>
-                                <property name="name">
-                                    <cstring>unnamed</cstring>
-                                </property>
-                                <widget class="QListView" row="0" column="0">
-                                    <column>
-                                        <property name="text">
-                                            <string>Properties</string>
-                                        </property>
-                                        <property name="clickable">
-                                            <bool>true</bool>
-                                        </property>
-                                        <property name="resizable">
-                                            <bool>true</bool>
-                                        </property>
-                                    </column>
-                                    <property name="name">
-                                        <cstring>lvAural</cstring>
-                                    </property>
-                                    <property name="resizeMode">
-                                        <enum>AllColumns</enum>
-                                    </property>
-                                </widget>
-                            </grid>
                         </widget>
-                        <widget class="QWidget">
+                    </grid>
+                </widget>
+                <widget class="QWidget">
+                    <property name="name">
+                        <cstring>tab</cstring>
+                    </property>
+                    <attribute name="title">
+                        <string>Aural</string>
+                    </attribute>
+                    <grid>
+                        <property name="name">
+                            <cstring>unnamed</cstring>
+                        </property>
+                        <property name="margin">
+                            <number>0</number>
+                        </property>
+                        <widget class="QListView" row="0" column="0">
+                            <column>
+                                <property name="text">
+                                    <string>Properties</string>
+                                </property>
+                                <property name="clickable">
+                                    <bool>true</bool>
+                                </property>
+                                <property name="resizable">
+                                    <bool>true</bool>
+                                </property>
+                            </column>
                             <property name="name">
-                                <cstring>tab</cstring>
+                                <cstring>lvAural</cstring>
+                            </property>
+                            <property name="resizeMode">
+                                <enum>AllColumns</enum>
                             </property>
-                            <attribute name="title">
-                                <string>All</string>
-                            </attribute>
-                            <grid>
-                                <property name="name">
-                                    <cstring>unnamed</cstring>
-                                </property>
-                                <widget class="QListView" row="0" column="0">
-                                    <column>
-                                        <property name="text">
-                                            <string>Properties</string>
-                                        </property>
-                                        <property name="clickable">
-                                            <bool>true</bool>
-                                        </property>
-                                        <property name="resizable">
-                                            <bool>true</bool>
-                                        </property>
-                                    </column>
-                                    <property name="name">
-                                        <cstring>lvAll</cstring>
-                                    </property>
-                                    <property name="resizeMode">
-                                        <enum>AllColumns</enum>
-                                    </property>
-                                </widget>
-                            </grid>
                         </widget>
-                    </widget>
-                    <widget class="QCheckBox">
+                    </grid>
+                </widget>
+                <widget class="QWidget">
+                    <property name="name">
+                        <cstring>tab</cstring>
+                    </property>
+                    <attribute name="title">
+                        <string>All</string>
+                    </attribute>
+                    <grid>
                         <property name="name">
-                            <cstring>SHckb</cstring>
-                        </property>
-                        <property name="text">
-                            <string>Use shorthand form</string>
+                            <cstring>unnamed</cstring>
                         </property>
-                        <property name="checked">
-                            <bool>true</bool>
+                        <property name="margin">
+                            <number>0</number>
                         </property>
-                    </widget>
-                </vbox>
+                        <widget class="QListView" row="0" column="0">
+                            <column>
+                                <property name="text">
+                                    <string>Properties</string>
+                                </property>
+                                <property name="clickable">
+                                    <bool>true</bool>
+                                </property>
+                                <property name="resizable">
+                                    <bool>true</bool>
+                                </property>
+                            </column>
+                            <property name="name">
+                                <cstring>lvAll</cstring>
+                            </property>
+                            <property name="resizeMode">
+                                <enum>AllColumns</enum>
+                            </property>
+                        </widget>
+                    </grid>
+                </widget>
             </widget>
             <widget class="QSplitter">
                 <property name="name">
@@ -295,6 +336,20 @@
                     <property name="name">
                         <cstring>fPreview</cstring>
                     </property>
+                    <property name="sizePolicy">
+                        <sizepolicy>
+                            <hsizetype>7</hsizetype>
+                            <vsizetype>7</vsizetype>
+                            <horstretch>0</horstretch>
+                            <verstretch>0</verstretch>
+                        </sizepolicy>
+                    </property>
+                    <property name="minimumSize">
+                        <size>
+                            <width>0</width>
+                            <height>200</height>
+                        </size>
+                    </property>
                     <property name="frameShape">
                         <enum>StyledPanel</enum>
                     </property>
@@ -306,11 +361,44 @@
                     <property name="name">
                         <cstring>display</cstring>
                     </property>
+                    <property name="sizePolicy">
+                        <sizepolicy>
+                            <hsizetype>7</hsizetype>
+                            <vsizetype>7</vsizetype>
+                            <horstretch>0</horstretch>
+                            <verstretch>0</verstretch>
+                        </sizepolicy>
+                    </property>
+                    <property name="maximumSize">
+                        <size>
+                            <width>32766</width>
+                            <height>32766</height>
+                        </size>
+                    </property>
+                    <property name="readOnly">
+                        <bool>true</bool>
+                    </property>
                 </widget>
             </widget>
         </widget>
+        <widget class="KPushButton" row="2" column="0">
+            <property name="name">
+                <cstring>pbHelp</cstring>
+            </property>
+            <property name="enabled">
+                <bool>false</bool>
+            </property>
+            <property name="text">
+                <string>&amp;Help</string>
+            </property>
+            <property name="accel">
+                <string>Alt+H</string>
+            </property>
+        </widget>
     </grid>
 </widget>
+<customwidgets>
+</customwidgets>
 <connections>
     <connection>
         <sender>pbCancel</sender>
@@ -326,4 +414,7 @@
     </connection>
 </connections>
 <layoutdefaults spacing="6" margin="11"/>
+<includehints>
+    <includehint>kpushbutton.h</includehint>
+</includehints>
 </UI>
diff --recursive -uP /usr/CVS_KDE/kdewebdev/quanta/components/csseditor/cssselector.cpp /home/simone/Desktop/kdewebdev/quanta/components/csseditor/cssselector.cpp
--- /usr/CVS_KDE/kdewebdev/quanta/components/csseditor/cssselector.cpp	2004-09-14 23:12:46.000000000 +0200
+++ /home/simone/Desktop/kdewebdev/quanta/components/csseditor/cssselector.cpp	2004-09-19 20:59:15.000000000 +0200
@@ -17,27 +17,41 @@
 
 #include "cssselector.h"
 #include "csseditor.h"
-#include <qlistview.h>
+
 #include <qlineedit.h>
 #include <qcombobox.h>
 #include <qpushbutton.h>
-#include <qfile.h>
 #include <qtextstream.h>
-#include <qdom.h>
 #include <qtabwidget.h>
 #include <qobjectlist.h>
 #include <qfileinfo.h>
+#include <qlabel.h>
+#include <qwhatsthis.h>
+
 #include <kstandarddirs.h>
 #include <klocale.h>
 #include <kdebug.h>
+#include <kmessagebox.h>
+#include <kurlrequester.h>
+#include <kfiledialog.h>
+#include "project.h"
+#include "stylesheetparser.h"
 
-CSSSelector::CSSSelector(QWidget *parent, const char* name) : CSSSelectorS (parent,name) {
+
+CSSSelector::CSSSelector(QWidget *parent, const char* name) : CSSSelectorS (parent,name),m_orderNumber(0),m_stopProcessingStylesheet(false) {
 
   m_currentItem = 0L;
-  m_hideEditorPreviewer = false;
+    
   Connect();
-  QString configDir = locate("appdata", "csseditor/config.xml");
-  configDir = QFileInfo(configDir).dirPath() + "/";
+  
+  kurApplyToFile->fileDialog()->setURL(Project::ref()->projectBaseURL().url());
+  kurApplyToFile->fileDialog()->setFilter( "*.html *.htm |" + i18n("HTML files") +" (*.html *.htm)\n*.xhtml |" + i18n("XHTML files")+" (*.xhtml)\n*.xml |" + i18n("XML files")+" (*.xml)\n*.*|" + i18n("All files")+" (*.*)"  );
+  QWhatsThis::add((QLineEdit*)(kurApplyToFile->lineEdit()),"With this line edit you can insert the URL of the file you want to use to preview the style sheet you are editing");                           
+  
+  /*QString configDir = locate("appdata", "csseditor/config.xml");
+  configDir = QFileInfo(configDir).dirPath() + "/";*/
+  
+  QString configDir = QFileInfo( locate("appdata", "csseditor/config.xml") ).dirPath() + "/";
 
   QDomDocument doc;
   QFile file( configDir+"pseudo.xml" );
@@ -127,8 +141,7 @@
 
 void CSSSelector::setDTDTags(const QString& s){
 
-  QString configDir = locate("appdata", "csseditor/config.xml");
-  configDir = QFileInfo(configDir).dirPath() + "/";
+  QString configDir = QFileInfo( locate("appdata", "csseditor/config.xml") ).dirPath() + "/";
 
   QDomDocument doc;
 
@@ -158,74 +171,122 @@
 
 void CSSSelector::addTag(){
   QListViewItem *item = new QListViewItem(lvTags);
-  if(!cbTag->currentText().isEmpty())
+  if(!cbTag->currentText().isEmpty()){
     item->setText(0,cbTag->currentText());
+    QPair<QString, unsigned int> tmp(QString::null,++m_orderNumber);  
+    m_currentStylesheetStructure[item->text(0)]=tmp;  
+  }     
 }
 
 void CSSSelector::addClass(){
   QListViewItem *item = new QListViewItem(lvClasses);
-  if(!leClass->text().isEmpty())
+  if(!leClass->text().isEmpty()){
     item->setText(0,leClass->text());
+    QPair<QString, unsigned int> tmp(QString::null,++m_orderNumber);  
+    m_currentStylesheetStructure[item->text(0)]=tmp; 
+  }     
 }
 
 void CSSSelector::addID(){
   QListViewItem *item = new QListViewItem(lvIDs);
-  if(!leID->text().isEmpty())
+  if(!leID->text().isEmpty()){
     item->setText(0,leID->text());
+    QPair<QString, unsigned int> tmp(QString::null,++m_orderNumber);  
+    m_currentStylesheetStructure[item->text(0)]=tmp;
+  }
 }
 
 void CSSSelector::addPseudo(){
   QListViewItem *item = new QListViewItem(lvPseudo);
   item->setText(0,(lePseudoSelector->text()+":"+cbPseudo->currentText()).stripWhiteSpace());
+  QPair<QString, unsigned int> tmp(QString::null,++m_orderNumber);  
+  m_currentStylesheetStructure[item->text(0)]=tmp;
 }
 
 void CSSSelector::openCSSEditor(QListViewItem * i){
-  QListView *lv = i->listView();
-  QListViewItem *temp;
-  QString s;
-
-  QObjectList *l = queryList( "QListView" );
-  QObjectListIt it( *l ); // iterate over the listviews
-  QObject *obj;
-
-  while ( (obj = it.current()) != 0 ) {
-    QListView *lvTemp = (QListView*)obj;
-    if( lv != lvTemp){
-      temp = lvTemp->firstChild();
-      while(temp){
-        s+=(temp->text(0)+" { "+temp->text(1)+" } ");
-        temp = temp->nextSibling();
+  if(!m_stopProcessingStylesheet){
+    QListView *lv = i->listView();
+    QListViewItem *temp;
+    QString s;
+    QObjectList *l = queryList( "QListView" );
+    QObjectListIt it( *l ); // iterate over the listviews
+    QObject *obj;
+
+    while ( (obj = it.current()) != 0 ) {
+      QListView *lvTemp = (QListView*)obj;
+      if( lv != lvTemp){
+        temp = lvTemp->firstChild();
+        while(temp){
+          s+=(temp->text(0)+" { "+temp->text(1)+" } ");
+          temp = temp->nextSibling();
+        }
       }
+      ++it;
     }
-    ++it;
-  }
-  delete l; // delete the list, not the objects
-
-  temp = lv->firstChild();
-
-  while(temp){
-    if(temp != i) s+=(temp->text(0)+" { "+temp->text(1)+" } ");
-    temp = temp->nextSibling();
-  }
+    delete l; // delete the list, not the objects
 
-  temp = lv->firstChild();
+    temp = lv->firstChild();
 
-  while(temp){
-    if(temp != i) s+=(temp->text(0)+" { "+temp->text(1)+" } ");
-    temp = temp->nextSibling();
+    while(temp){
+      if(temp != i) s+=(temp->text(0)+" { "+temp->text(1)+" } ");
+      temp = temp->nextSibling();
+   }
+  
+    CSSEditor dlg(i);
+    if(m_callingFrom == "XHTML"){
+      dlg.setHeader(m_header);
+      dlg.setSelectors(s);
+      dlg.setFooter(m_footer);
+      dlg.setFileToPreview(m_fileToPreview,false);
+    }
+    else if(m_callingFrom == "CSS"){         
+              if(kurApplyToFile->url().isEmpty()) 
+                dlg.hidePreviewer();
+              else {
+                dlg.setFileToPreview(kurApplyToFile->url(),true);
+                
+                QString tmp;
+                QListViewItem *item = lvTags->firstChild();
+                while( item ) {
+                  if(i->text(0).stripWhiteSpace() != item->text(0).stripWhiteSpace())
+                  tmp += item->text(0) + " {" + item->text(1) + "}";
+                  item = item->nextSibling();
+                }
+        
+                item = lvClasses->firstChild();
+                while( item ) {
+                  if(i->text(0).stripWhiteSpace() != item->text(0).stripWhiteSpace())
+                  tmp += item->text(0) + " {" + item->text(1) + "}";
+                  item = item->nextSibling();
+                }
+        
+                item = lvIDs->firstChild();
+                while( item ) {
+                  if(i->text(0).stripWhiteSpace() != item->text(0).stripWhiteSpace())
+                  tmp += item->text(0) + " {" + item->text(1) + "}";
+                  item = item->nextSibling();
+                }
+        
+                item = lvPseudo->firstChild();
+                while( item ) {
+                  if(i->text(0).stripWhiteSpace() != item->text(0).stripWhiteSpace())
+                  tmp += item->text(0) + " {" + item->text(1) + "}";
+                  item = item->nextSibling();
+                }
+                       
+                dlg.setExternalStyleSheetDefinition(tmp);
+              }            
+   } 
+   
+    dlg.initialize();
+
+    if(dlg.exec())  {
+      i->setText(1,dlg.generateProperties());
+      QPair<QString, unsigned int> tmp(m_currentStylesheetStructure[i->text(0)]);
+      tmp.first = dlg.generateProperties();
+      m_currentStylesheetStructure[i->text(0)] = tmp;
+    }
   }
-
-  CSSEditor *dlg = new CSSEditor(i);
-  //dlg->setSourceFileName(sourceFileName);
-  dlg->setForInitialPreview(m_initialPreviewText);
-
-  dlg->setHeader(m_header);
-  dlg->setSelectors(s);
-  dlg->setFooter(m_footer);
-  dlg->initialize();
-  if(m_hideEditorPreviewer) dlg->hidePreviewer();
-  if(dlg->exec())  i->setText(1,dlg->generateProperties());
-  delete dlg;
 }
 
 void CSSSelector::setCurrentListView(QWidget* w){
@@ -234,172 +295,98 @@
 }
 
 void CSSSelector::removeAll(){
+  QListViewItemIterator it( m_currentListView );
+        while ( it.current() ) {
+            QListViewItem *item = it.current();
+            m_currentStylesheetStructure.remove(item->text(0));
+            ++it;
+        }
    m_currentListView->clear();
 }
 
 void CSSSelector::removeSelected(){
+  m_currentStylesheetStructure.remove(m_currentItem->text(0));
   if( m_currentItem ) {
     delete m_currentItem;
-    m_currentItem = 0L;
+   // m_currentItem = 0L;
   }
 }
 
-void CSSSelector::loadExistingStyleSection(QString s){
-  s.remove("\n");
-  s.remove("\t");
-  uint lf,rt;
-  while(true){
-   lf=s.find("/*",0);
-   rt=s.find("*/",0);
-   if(s.contains("/*") == 0 || s.contains("*/") == 0 ) break;
-   s.remove(lf,rt+2-lf);
-  }
-
-  int  atPos=s.find("@");
-
-  QString tempStr,
-               atRuleType;
-
-  while(atPos >=0 ){
-    int openParePos=s.find("{",atPos);
-    if(openParePos>=0){
-      if(s.mid(atPos,openParePos-atPos).contains(";")){
-        int SCPos=s.find(";",atPos);
-        tempStr=s.mid(atPos,SCPos-atPos).simplifyWhiteSpace();
-        tempStr.remove("\n");
-        tempStr.remove("\t");
-        tempStr.remove(0,tempStr.find(" ") );
-        s.remove(atPos,SCPos-atPos+1);
+void CSSSelector::loadCSSContent(QString s){
+  stylesheetParser p(s);
+  connect(&p,SIGNAL(errorOccurred(const QString&)), this, SLOT(setStylesheetProcessing(const QString&)));
+  p.parse();
+  m_orderNumber = p.orderNumber();
+  
+  QMap<QString, QPair<QString,unsigned int> >::Iterator it;
+  m_currentStylesheetStructure = p.stylesheetStructure();
+  for ( it = m_currentStylesheetStructure.begin(); it != m_currentStylesheetStructure.end(); ++it ) {
+    if(!it.key().startsWith("@rule") and !it.key().startsWith("/*")){
+      QListViewItem *item;
+      if(it.key().contains(":")){
+        item = new QListViewItem(lvPseudo);
       }
-      else{
-        int closedParePos = s.find("}",atPos);
-        if(closedParePos>=0){
-          int closedPareNum = 1;
-          int openPareNum = s.mid(atPos,closedParePos-atPos).contains("{");
-          while( closedPareNum != openPareNum ){
-            int oldClosedParePos = closedParePos;
-            closedParePos = s.find("}",closedParePos+1);
-            if(s.mid(oldClosedParePos,closedParePos-oldClosedParePos).contains("{"))
-              openPareNum++;
-            closedPareNum++;
-          }
-        }
-
-        tempStr=s.left(closedParePos+1).simplifyWhiteSpace();
-        tempStr.remove("\n");
-        tempStr.remove("\t");
-        tempStr.remove(0,tempStr.find("{") );
-        s.remove(atPos,closedParePos-atPos+1);
-
+      else
+      if(it.key().contains("#")){
+        item = new QListViewItem(lvIDs);
       }
-
-    }
-    else{
-      int SCPos=s.find(";",atPos);
-      if(SCPos){
-        tempStr=s.mid(atPos,SCPos-atPos);
-        s.remove(tempStr+";");
-        tempStr.remove("\n");
-        tempStr.remove("\t");
-        tempStr.remove(0,tempStr.find(" ") );
+      else
+      if(it.key().contains(".")){
+        item = new QListViewItem(lvClasses);
       }
-      else{
-        break;
+      else {
+        item = new QListViewItem(lvTags);
       }
-    }
-    atPos=s.find("@");
-  }
-
-  QMap<QString,QString> styleTagEntities;
-    QStringList temp = QStringList::split("}",s.stripWhiteSpace());
-
-    for ( QStringList::Iterator it = temp.begin(); it != temp.end(); ++it ) {
-      (*it).remove("\n");
-      (*it).remove("\t");
-      styleTagEntities[(*it).section("{",0,0).simplifyWhiteSpace()]=(*it).section("{",1,1).simplifyWhiteSpace();
-    }
 
-  QMap<QString,QString>::Iterator it;
-  for ( it = styleTagEntities.begin(); it != styleTagEntities.end(); ++it ) {
-    QListViewItem *item;
-    if(it.key().contains(":")){
-      item = new QListViewItem(lvPseudo);
+      item->setText(0,it.key());
+      item->setText(1,it.data().first);
+    
     }
-    else
-    if(it.key().contains("#")){
-      item = new QListViewItem(lvIDs);
-    }
-    else
-    if(it.key().contains(".")){
-      item = new QListViewItem(lvClasses);
-    }
-    else {
-      item = new QListViewItem(lvTags);
-    }
-
-    item->setText(0,it.key());
-    item->setText(1,it.data());
   }
 }
 
-QString CSSSelector::generateStyleSection(){
-
-  QListViewItem *temp;
-  QString styleSection;
-
-  QObjectList *l = queryList( "QListView" );
-  QObjectListIt it( *l ); // iterate over the listviews
-  QObject *obj;
-
-  while ( (obj = it.current()) != 0 ) {
-    temp = ((QListView*)obj)->firstChild();
-    while(temp){
-    styleSection+=(temp->text(0)+" { "+temp->text(1)+" } \n\t");
-    temp = temp->nextSibling();
-    }
-    ++it;
-  }
-  delete l; // delete the list, not the objects
-
-  styleSection.truncate(styleSection.length()-1); //we elminate the last \t
-
-  return QString("\n\t")+styleSection;
-}
-
 QString CSSSelector::generateFormattedStyleSection(){
-
-  QListViewItem *temp;
+  QMap< QString,QPair<QString,unsigned int> >::Iterator it;
   QString styleSection,tmpStr;
   unsigned int indentWidth,
                       indentDisplacement = 2;
-
-  QObjectList *l = queryList( "QListView" );
-  QObjectListIt it( *l ); // iterate over the listviews
-  QObject *obj;
-
-  while ( (obj = it.current()) != 0 ) {
-    temp = ((QListView*)obj)->firstChild();
-    while(temp){
-      styleSection += temp->text(0);
-      styleSection += " {\n";
-      indentWidth = indentDisplacement + 2;
-      QStringList props = QStringList::split(";",temp->text(1));
-      QString indentStr;
-      indentStr.fill(' ',indentWidth);
-      for ( QStringList::Iterator it = props.begin(); it != props.end(); ++it ) {
-        if((*it).startsWith(" ")) tmpStr += ( indentStr + (*it).remove(0,1) + ";\n");
-        else tmpStr += (indentStr + (*it) + ";\n");
-      }
-      indentStr.fill(' ', indentDisplacement);
-      styleSection += ( tmpStr + indentStr + "}\n\n");
-      tmpStr = QString::null;
-      temp = temp->nextSibling();
+  for ( unsigned int i=0;i<=m_orderNumber;i++ ) {                    
+    for ( it = m_currentStylesheetStructure.begin(); it != m_currentStylesheetStructure.end(); ++it ) {
+      if(it.data().second == i){
+       if(it.key().startsWith("@rule"))  
+         styleSection += it.data().first;
+       else if(it.key().startsWith("/*"))  
+                 styleSection += it.data().first;
+               else {
+                  styleSection += "\n" + it.key() + " {\n";
+                  indentWidth = indentDisplacement + 2;
+                  QStringList props = QStringList::split(";",it.data().first.simplifyWhiteSpace());
+                  QString indentStr;
+                  indentStr.fill(' ',indentWidth);
+                  for ( QStringList::Iterator it = props.begin(); it != props.end(); ++it ) {
+                    if((*it).startsWith(" ")) 
+                      tmpStr +=  indentStr + (*it).remove(0,1) + ";\n";
+                    else 
+                      tmpStr += indentStr + (*it) + ";\n";
+                  }
+                  indentStr.fill(' ', indentDisplacement);
+                  styleSection += tmpStr + indentStr + "}\n\n";
+                  tmpStr = QString::null;
+              }
+      } 
     }
-    ++it;
   }
-    delete l; // delete the list, not the objects
-
   return "\n"+styleSection;
 }
 
+void CSSSelector::enableApplyToFile(){
+  tlApplyToFile->setEnabled(true);
+  kurApplyToFile->setEnabled(true);
+}
+
+void CSSSelector::setStylesheetProcessing(const QString& msg) { 
+  m_stopProcessingStylesheet=true; 
+  KMessageBox::error (0L, msg );
+}
+
 #include "cssselector.moc"
diff --recursive -uP /usr/CVS_KDE/kdewebdev/quanta/components/csseditor/cssselector.h /home/simone/Desktop/kdewebdev/quanta/components/csseditor/cssselector.h
--- /usr/CVS_KDE/kdewebdev/quanta/components/csseditor/cssselector.h	2004-09-14 23:12:46.000000000 +0200
+++ /home/simone/Desktop/kdewebdev/quanta/components/csseditor/cssselector.h	2004-09-19 20:58:56.000000000 +0200
@@ -18,8 +18,10 @@
 #ifndef CSSSELECTOR_H
 #define CSSSELECTOR_H
 
-
+#include <qmap.h>
+#include <qpair.h>
 #include "cssselectors.h"
+
 class QListViewItem;
 class QStringList;
 /**
@@ -28,33 +30,31 @@
 
 class CSSSelector : public CSSSelectorS {
   Q_OBJECT
-  
+
   private:
     QListViewItem *m_currentItem;
     QListView *m_currentListView;
     QString m_header,
                  m_footer,
-                 m_initialPreviewText;  
-    //QString m_sourceFileName;             
-    bool m_hideEditorPreviewer; 
+                 m_callingFrom,
+                 m_fileToPreview;
+    QMap<QString, QPair<QString,unsigned int> > m_currentStylesheetStructure;    
+    unsigned int m_orderNumber; 
+    bool m_stopProcessingStylesheet;                
+ 
     void Connect();   
-    
             
-  public: 
+  public:    
     CSSSelector(QWidget *parent=0, const char* name=0);
     ~CSSSelector();
-    
-  public :
-    void loadExistingStyleSection(QString);
-    void loadCSSFileContent(QString s){ loadExistingStyleSection(s); }
-    void setForInitialPreview(const QString& s) { m_initialPreviewText = s;}   
+    void loadCSSContent(QString s);
     void setHeader(const QString& h) { m_header = h; }
-    void setFooter(const QString& f) { m_footer = f; }
-    QString generateStyleSection();  
-    QString generateFormattedStyleSection();         
-    //void setSourceFileName(const QString& n) { m_sourceFileName = n; }
-    //QString sourceFileName() const { return m_sourceFileName; }    
-    void hideEditorPreviewer(bool b){ m_hideEditorPreviewer = b; }
+    void setFooter(const QString& f) { m_footer = f; }         
+    void enableApplyToFile();
+    void setCallingFrom(QString cf){ m_callingFrom = cf ;}
+    void setFileToPreview(const QString& s){ m_fileToPreview=s;}
+    bool errorOnProcessingStylesheet() const { return m_stopProcessingStylesheet; }
+    QString generateFormattedStyleSection();
     
   private slots: 
     void openCSSEditor(QListViewItem *);  
@@ -67,6 +67,7 @@
     void setCurrentItem(QListViewItem* i) { m_currentItem = i; }
     void setCurrentListView(QWidget*);
     void setDTDTags(const QString&);
+    void setStylesheetProcessing(const QString&);   
 };
 
 #endif
diff --recursive -uP /usr/CVS_KDE/kdewebdev/quanta/components/csseditor/cssselectors.ui /home/simone/Desktop/kdewebdev/quanta/components/csseditor/cssselectors.ui
--- /usr/CVS_KDE/kdewebdev/quanta/components/csseditor/cssselectors.ui	2004-09-14 23:12:48.000000000 +0200
+++ /home/simone/Desktop/kdewebdev/quanta/components/csseditor/cssselectors.ui	2004-09-05 18:10:21.000000000 +0200
@@ -1,4 +1,4 @@
-<!DOCTYPE UI><UI version="3.1" stdsetdef="1">
+<!DOCTYPE UI><UI version="3.3" stdsetdef="1">
 <class>CSSSelectorS</class>
 <widget class="QDialog">
     <property name="name">
@@ -15,72 +15,86 @@
     <property name="caption">
         <string>CSS Selector Dialog</string>
     </property>
+    <property name="sizeGripEnabled">
+        <bool>true</bool>
+    </property>
     <grid>
         <property name="name">
             <cstring>unnamed</cstring>
         </property>
-        <widget class="QLayoutWidget" row="1" column="0">
+        <widget class="QLayoutWidget" row="1" column="0" rowspan="1" colspan="3">
             <property name="name">
-                <cstring>layout2</cstring>
+                <cstring>layout11</cstring>
             </property>
             <hbox>
                 <property name="name">
                     <cstring>unnamed</cstring>
                 </property>
-                <widget class="QPushButton">
+                <widget class="QLabel">
                     <property name="name">
-                        <cstring>pbHelp</cstring>
+                        <cstring>tlApplyToFile</cstring>
+                    </property>
+                    <property name="enabled">
+                        <bool>false</bool>
                     </property>
                     <property name="text">
-                        <string>&amp;Help</string>
+                        <string>Apply to file</string>
                     </property>
                 </widget>
-                <spacer>
+                <widget class="KURLRequester">
                     <property name="name">
-                        <cstring>spacer1</cstring>
+                        <cstring>kurApplyToFile</cstring>
                     </property>
-                    <property name="orientation">
-                        <enum>Horizontal</enum>
+                    <property name="enabled">
+                        <bool>false</bool>
                     </property>
-                    <property name="sizeType">
-                        <enum>Expanding</enum>
+                </widget>
+            </hbox>
+        </widget>
+        <spacer row="2" column="1">
+            <property name="name">
+                <cstring>spacer19_2</cstring>
+            </property>
+            <property name="orientation">
+                <enum>Vertical</enum>
+            </property>
+            <property name="sizeType">
+                <enum>Expanding</enum>
+            </property>
+            <property name="sizeHint">
+                <size>
+                    <width>20</width>
+                    <height>40</height>
+                </size>
+            </property>
+        </spacer>
+        <widget class="QLayoutWidget" row="3" column="2">
+            <property name="name">
+                <cstring>layout1</cstring>
+            </property>
+            <hbox>
+                <property name="name">
+                    <cstring>unnamed</cstring>
+                </property>
+                <widget class="QPushButton">
+                    <property name="name">
+                        <cstring>pbOk</cstring>
                     </property>
-                    <property name="sizeHint">
-                        <size>
-                            <width>40</width>
-                            <height>20</height>
-                        </size>
+                    <property name="text">
+                        <string>&amp;OK</string>
                     </property>
-                </spacer>
-                <widget class="QLayoutWidget">
+                </widget>
+                <widget class="QPushButton">
                     <property name="name">
-                        <cstring>layout1</cstring>
+                        <cstring>pbCancel</cstring>
+                    </property>
+                    <property name="text">
+                        <string>&amp;Cancel</string>
                     </property>
-                    <hbox>
-                        <property name="name">
-                            <cstring>unnamed</cstring>
-                        </property>
-                        <widget class="QPushButton">
-                            <property name="name">
-                                <cstring>pbOk</cstring>
-                            </property>
-                            <property name="text">
-                                <string>&amp;OK</string>
-                            </property>
-                        </widget>
-                        <widget class="QPushButton">
-                            <property name="name">
-                                <cstring>pbCancel</cstring>
-                            </property>
-                            <property name="text">
-                                <string>&amp;Cancel</string>
-                            </property>
-                        </widget>
-                    </hbox>
                 </widget>
             </hbox>
         </widget>
-        <widget class="QTabWidget" row="0" column="0">
+        <widget class="QTabWidget" row="0" column="0" rowspan="1" colspan="3">
             <property name="name">
                 <cstring>twSelectors</cstring>
             </property>
@@ -95,243 +109,233 @@
                     <property name="name">
                         <cstring>unnamed</cstring>
                     </property>
-                    <widget class="QLayoutWidget" row="0" column="0">
+                    <widget class="QLayoutWidget" row="0" column="2">
                         <property name="name">
-                            <cstring>layout26</cstring>
+                            <cstring>layout13</cstring>
                         </property>
-                        <hbox>
+                        <vbox>
                             <property name="name">
                                 <cstring>unnamed</cstring>
                             </property>
-                            <widget class="QListView">
-                                <column>
-                                    <property name="text">
-                                        <string>Selector</string>
-                                    </property>
-                                    <property name="clickable">
-                                        <bool>true</bool>
-                                    </property>
-                                    <property name="resizable">
-                                        <bool>true</bool>
-                                    </property>
-                                </column>
-                                <column>
-                                    <property name="text">
-                                        <string>Properties</string>
-                                    </property>
-                                    <property name="clickable">
-                                        <bool>true</bool>
-                                    </property>
-                                    <property name="resizable">
-                                        <bool>true</bool>
-                                    </property>
-                                </column>
+                            <spacer>
                                 <property name="name">
-                                    <cstring>lvTags</cstring>
+                                    <cstring>spacer6_2</cstring>
+                                </property>
+                                <property name="orientation">
+                                    <enum>Vertical</enum>
+                                </property>
+                                <property name="sizeType">
+                                    <enum>Expanding</enum>
+                                </property>
+                                <property name="sizeHint">
+                                    <size>
+                                        <width>20</width>
+                                        <height>16</height>
+                                    </size>
+                                </property>
+                            </spacer>
+                            <widget class="QGroupBox">
+                                <property name="name">
+                                    <cstring>groupBox1</cstring>
                                 </property>
                                 <property name="sizePolicy">
                                     <sizepolicy>
-                                        <hsizetype>7</hsizetype>
-                                        <vsizetype>7</vsizetype>
+                                        <hsizetype>5</hsizetype>
+                                        <vsizetype>5</vsizetype>
                                         <horstretch>1</horstretch>
                                         <verstretch>0</verstretch>
                                     </sizepolicy>
                                 </property>
-                                <property name="allColumnsShowFocus">
-                                    <bool>true</bool>
+                                <property name="title">
+                                    <string>Remove Selector</string>
                                 </property>
-                                <property name="showSortIndicator">
-                                    <bool>true</bool>
+                                <grid>
+                                    <property name="name">
+                                        <cstring>unnamed</cstring>
+                                    </property>
+                                    <widget class="QPushButton" row="0" column="0">
+                                        <property name="name">
+                                            <cstring>pbRemoveSelectedTag</cstring>
+                                        </property>
+                                        <property name="font">
+                                            <font>
+                                            </font>
+                                        </property>
+                                        <property name="text">
+                                            <string>Selected</string>
+                                        </property>
+                                    </widget>
+                                    <widget class="QPushButton" row="1" column="0">
+                                        <property name="name">
+                                            <cstring>pbRemoveAllTags</cstring>
+                                        </property>
+                                        <property name="text">
+                                            <string>All</string>
+                                        </property>
+                                    </widget>
+                                </grid>
+                            </widget>
+                            <spacer>
+                                <property name="name">
+                                    <cstring>spacer6</cstring>
+                                </property>
+                                <property name="orientation">
+                                    <enum>Vertical</enum>
+                                </property>
+                                <property name="sizeType">
+                                    <enum>Expanding</enum>
                                 </property>
-                                <property name="resizeMode">
-                                    <enum>LastColumn</enum>
+                                <property name="sizeHint">
+                                    <size>
+                                        <width>20</width>
+                                        <height>16</height>
+                                    </size>
+                                </property>
+                            </spacer>
+                            <widget class="QGroupBox">
+                                <property name="name">
+                                    <cstring>groupBox2</cstring>
+                                </property>
+                                <property name="title">
+                                    <string>DTD Selection</string>
                                 </property>
+                                <grid>
+                                    <property name="name">
+                                        <cstring>unnamed</cstring>
+                                    </property>
+                                    <widget class="QComboBox" row="0" column="0">
+                                        <property name="name">
+                                            <cstring>cbDTD</cstring>
+                                        </property>
+                                    </widget>
+                                </grid>
                             </widget>
                             <spacer>
                                 <property name="name">
-                                    <cstring>spacer15</cstring>
+                                    <cstring>spacer7_3</cstring>
                                 </property>
                                 <property name="orientation">
-                                    <enum>Horizontal</enum>
+                                    <enum>Vertical</enum>
                                 </property>
                                 <property name="sizeType">
-                                    <enum>Minimum</enum>
+                                    <enum>Expanding</enum>
                                 </property>
                                 <property name="sizeHint">
                                     <size>
-                                        <width>40</width>
-                                        <height>20</height>
+                                        <width>20</width>
+                                        <height>24</height>
                                     </size>
                                 </property>
                             </spacer>
-                            <widget class="QLayoutWidget">
+                            <widget class="QGroupBox">
                                 <property name="name">
-                                    <cstring>layout25</cstring>
+                                    <cstring>groupBox3</cstring>
+                                </property>
+                                <property name="title">
+                                    <string>Add Selector</string>
                                 </property>
-                                <vbox>
+                                <grid>
                                     <property name="name">
                                         <cstring>unnamed</cstring>
                                     </property>
-                                    <spacer>
+                                    <widget class="QComboBox" row="0" column="0">
                                         <property name="name">
-                                            <cstring>spacer6_2</cstring>
+                                            <cstring>cbTag</cstring>
                                         </property>
-                                        <property name="orientation">
-                                            <enum>Vertical</enum>
+                                        <property name="editable">
+                                            <bool>true</bool>
                                         </property>
-                                        <property name="sizeType">
-                                            <enum>Expanding</enum>
-                                        </property>
-                                        <property name="sizeHint">
-                                            <size>
-                                                <width>20</width>
-                                                <height>22</height>
-                                            </size>
-                                        </property>
-                                    </spacer>
-                                    <widget class="QGroupBox">
-                                        <property name="name">
-                                            <cstring>groupBox1</cstring>
-                                        </property>
-                                        <property name="sizePolicy">
-                                            <sizepolicy>
-                                                <hsizetype>5</hsizetype>
-                                                <vsizetype>5</vsizetype>
-                                                <horstretch>1</horstretch>
-                                                <verstretch>0</verstretch>
-                                            </sizepolicy>
-                                        </property>
-                                        <property name="title">
-                                            <string>Remove Selector</string>
-                                        </property>
-                                        <grid>
-                                            <property name="name">
-                                                <cstring>unnamed</cstring>
-                                            </property>
-                                            <widget class="QPushButton" row="0" column="0">
-                                                <property name="name">
-                                                    <cstring>pbRemoveSelectedTag</cstring>
-                                                </property>
-                                                <property name="font">
-                                                    <font>
-                                                    </font>
-                                                </property>
-                                                <property name="text">
-                                                    <string>Selected</string>
-                                                </property>
-                                            </widget>
-                                            <widget class="QPushButton" row="1" column="0">
-                                                <property name="name">
-                                                    <cstring>pbRemoveAllTags</cstring>
-                                                </property>
-                                                <property name="text">
-                                                    <string>All</string>
-                                                </property>
-                                            </widget>
-                                        </grid>
-                                    </widget>
-                                    <spacer>
-                                        <property name="name">
-                                            <cstring>spacer6</cstring>
-                                        </property>
-                                        <property name="orientation">
-                                            <enum>Vertical</enum>
-                                        </property>
-                                        <property name="sizeType">
-                                            <enum>Expanding</enum>
-                                        </property>
-                                        <property name="sizeHint">
-                                            <size>
-                                                <width>20</width>
-                                                <height>21</height>
-                                            </size>
-                                        </property>
-                                    </spacer>
-                                    <widget class="QGroupBox">
-                                        <property name="name">
-                                            <cstring>groupBox2</cstring>
-                                        </property>
-                                        <property name="title">
-                                            <string>DTD Selection</string>
-                                        </property>
-                                        <grid>
-                                            <property name="name">
-                                                <cstring>unnamed</cstring>
-                                            </property>
-                                            <widget class="QComboBox" row="0" column="0">
-                                                <property name="name">
-                                                    <cstring>cbDTD</cstring>
-                                                </property>
-                                            </widget>
-                                        </grid>
-                                    </widget>
-                                    <spacer>
-                                        <property name="name">
-                                            <cstring>spacer7_3</cstring>
-                                        </property>
-                                        <property name="orientation">
-                                            <enum>Vertical</enum>
-                                        </property>
-                                        <property name="sizeType">
-                                            <enum>Expanding</enum>
-                                        </property>
-                                        <property name="sizeHint">
-                                            <size>
-                                                <width>20</width>
-                                                <height>30</height>
-                                            </size>
-                                        </property>
-                                    </spacer>
-                                    <widget class="QGroupBox">
-                                        <property name="name">
-                                            <cstring>groupBox3</cstring>
-                                        </property>
-                                        <property name="title">
-                                            <string>Add Selector</string>
-                                        </property>
-                                        <grid>
-                                            <property name="name">
-                                                <cstring>unnamed</cstring>
-                                            </property>
-                                            <widget class="QComboBox" row="0" column="0">
-                                                <property name="name">
-                                                    <cstring>cbTag</cstring>
-                                                </property>
-                                                <property name="editable">
-                                                    <bool>true</bool>
-                                                </property>
-                                            </widget>
-                                            <widget class="QPushButton" row="1" column="0">
-                                                <property name="name">
-                                                    <cstring>pbAddTag</cstring>
-                                                </property>
-                                                <property name="text">
-                                                    <string>Add</string>
-                                                </property>
-                                            </widget>
-                                        </grid>
-                                    </widget>
-                                    <spacer>
-                                        <property name="name">
-                                            <cstring>spacer6_3</cstring>
-                                        </property>
-                                        <property name="orientation">
-                                            <enum>Vertical</enum>
-                                        </property>
-                                        <property name="sizeType">
-                                            <enum>Expanding</enum>
-                                        </property>
-                                        <property name="sizeHint">
-                                            <size>
-                                                <width>20</width>
-                                                <height>22</height>
-                                            </size>
+                                    </widget>
+                                    <widget class="QPushButton" row="1" column="0">
+                                        <property name="name">
+                                            <cstring>pbAddTag</cstring>
+                                        </property>
+                                        <property name="text">
+                                            <string>Add</string>
                                         </property>
-                                    </spacer>
-                                </vbox>
+                                    </widget>
+                                </grid>
                             </widget>
-                        </hbox>
+                            <spacer>
+                                <property name="name">
+                                    <cstring>spacer6_3</cstring>
+                                </property>
+                                <property name="orientation">
+                                    <enum>Vertical</enum>
+                                </property>
+                                <property name="sizeType">
+                                    <enum>Expanding</enum>
+                                </property>
+                                <property name="sizeHint">
+                                    <size>
+                                        <width>20</width>
+                                        <height>16</height>
+                                    </size>
+                                </property>
+                            </spacer>
+                        </vbox>
+                    </widget>
+                    <widget class="QListView" row="0" column="0">
+                        <column>
+                            <property name="text">
+                                <string>Selector</string>
+                            </property>
+                            <property name="clickable">
+                                <bool>true</bool>
+                            </property>
+                            <property name="resizable">
+                                <bool>true</bool>
+                            </property>
+                        </column>
+                        <column>
+                            <property name="text">
+                                <string>Properties</string>
+                            </property>
+                            <property name="clickable">
+                                <bool>true</bool>
+                            </property>
+                            <property name="resizable">
+                                <bool>true</bool>
+                            </property>
+                        </column>
+                        <property name="name">
+                            <cstring>lvTags</cstring>
+                        </property>
+                        <property name="sizePolicy">
+                            <sizepolicy>
+                                <hsizetype>7</hsizetype>
+                                <vsizetype>7</vsizetype>
+                                <horstretch>1</horstretch>
+                                <verstretch>0</verstretch>
+                            </sizepolicy>
+                        </property>
+                        <property name="allColumnsShowFocus">
+                            <bool>true</bool>
+                        </property>
+                        <property name="showSortIndicator">
+                            <bool>true</bool>
+                        </property>
+                        <property name="resizeMode">
+                            <enum>LastColumn</enum>
+                        </property>
                     </widget>
+                    <spacer row="0" column="1">
+                        <property name="name">
+                            <cstring>spacer15</cstring>
+                        </property>
+                        <property name="orientation">
+                            <enum>Horizontal</enum>
+                        </property>
+                        <property name="sizeType">
+                            <enum>Minimum</enum>
+                        </property>
+                        <property name="sizeHint">
+                            <size>
+                                <width>40</width>
+                                <height>20</height>
+                            </size>
+                        </property>
+                    </spacer>
                 </grid>
             </widget>
             <widget class="QWidget">
@@ -339,7 +343,7 @@
                     <cstring>tab</cstring>
                 </property>
                 <attribute name="title">
-                    <string>Classes</string>
+                    <string>IDs</string>
                 </attribute>
                 <grid>
                     <property name="name">
@@ -369,7 +373,7 @@
                             </property>
                         </column>
                         <property name="name">
-                            <cstring>lvClasses</cstring>
+                            <cstring>lvIDs</cstring>
                         </property>
                         <property name="sizePolicy">
                             <sizepolicy>
@@ -389,152 +393,142 @@
                             <enum>LastColumn</enum>
                         </property>
                     </widget>
-                    <widget class="QLayoutWidget" row="0" column="1">
+                    <spacer row="0" column="1">
+                        <property name="name">
+                            <cstring>spacer18</cstring>
+                        </property>
+                        <property name="orientation">
+                            <enum>Horizontal</enum>
+                        </property>
+                        <property name="sizeType">
+                            <enum>Expanding</enum>
+                        </property>
+                        <property name="sizeHint">
+                            <size>
+                                <width>40</width>
+                                <height>20</height>
+                            </size>
+                        </property>
+                    </spacer>
+                    <widget class="QLayoutWidget" row="0" column="2">
                         <property name="name">
-                            <cstring>layout19</cstring>
+                            <cstring>layout14</cstring>
                         </property>
-                        <hbox>
+                        <vbox>
                             <property name="name">
                                 <cstring>unnamed</cstring>
                             </property>
                             <spacer>
                                 <property name="name">
-                                    <cstring>spacer19</cstring>
+                                    <cstring>spacer12</cstring>
                                 </property>
                                 <property name="orientation">
-                                    <enum>Horizontal</enum>
+                                    <enum>Vertical</enum>
                                 </property>
                                 <property name="sizeType">
                                     <enum>Expanding</enum>
                                 </property>
                                 <property name="sizeHint">
                                     <size>
-                                        <width>40</width>
-                                        <height>20</height>
+                                        <width>20</width>
+                                        <height>40</height>
                                     </size>
                                 </property>
                             </spacer>
-                            <widget class="QLayoutWidget">
+                            <widget class="QGroupBox">
                                 <property name="name">
-                                    <cstring>layout13</cstring>
+                                    <cstring>groupBox4_2</cstring>
+                                </property>
+                                <property name="title">
+                                    <string>Remove Selector</string>
                                 </property>
-                                <vbox>
+                                <grid>
                                     <property name="name">
                                         <cstring>unnamed</cstring>
                                     </property>
-                                    <spacer>
+                                    <widget class="QPushButton" row="0" column="0">
                                         <property name="name">
-                                            <cstring>spacer9</cstring>
+                                            <cstring>pbRemoveSelectedID</cstring>
                                         </property>
-                                        <property name="orientation">
-                                            <enum>Vertical</enum>
+                                        <property name="font">
+                                            <font>
+                                            </font>
                                         </property>
-                                        <property name="sizeType">
-                                            <enum>Expanding</enum>
-                                        </property>
-                                        <property name="sizeHint">
-                                            <size>
-                                                <width>20</width>
-                                                <height>40</height>
-                                            </size>
-                                        </property>
-                                    </spacer>
-                                    <widget class="QGroupBox">
-                                        <property name="name">
-                                            <cstring>groupBox4_3</cstring>
-                                        </property>
-                                        <property name="title">
-                                            <string>Remove Selector</string>
-                                        </property>
-                                        <grid>
-                                            <property name="name">
-                                                <cstring>unnamed</cstring>
-                                            </property>
-                                            <widget class="QPushButton" row="0" column="0">
-                                                <property name="name">
-                                                    <cstring>pbRemoveSelectedClass</cstring>
-                                                </property>
-                                                <property name="font">
-                                                    <font>
-                                                    </font>
-                                                </property>
-                                                <property name="text">
-                                                    <string>Selected</string>
-                                                </property>
-                                            </widget>
-                                            <widget class="QPushButton" row="1" column="0">
-                                                <property name="name">
-                                                    <cstring>pbRemoveAllClasses</cstring>
-                                                </property>
-                                                <property name="text">
-                                                    <string>All</string>
-                                                </property>
-                                            </widget>
-                                        </grid>
-                                    </widget>
-                                    <spacer>
-                                        <property name="name">
-                                            <cstring>spacer11</cstring>
-                                        </property>
-                                        <property name="orientation">
-                                            <enum>Vertical</enum>
-                                        </property>
-                                        <property name="sizeType">
-                                            <enum>Expanding</enum>
-                                        </property>
-                                        <property name="sizeHint">
-                                            <size>
-                                                <width>20</width>
-                                                <height>40</height>
-                                            </size>
-                                        </property>
-                                    </spacer>
-                                    <widget class="QGroupBox">
-                                        <property name="name">
-                                            <cstring>groupBox7</cstring>
-                                        </property>
-                                        <property name="title">
-                                            <string>Add Selector</string>
-                                        </property>
-                                        <grid>
-                                            <property name="name">
-                                                <cstring>unnamed</cstring>
-                                            </property>
-                                            <widget class="QLineEdit" row="0" column="0">
-                                                <property name="name">
-                                                    <cstring>leClass</cstring>
-                                                </property>
-                                            </widget>
-                                            <widget class="QPushButton" row="1" column="0">
-                                                <property name="name">
-                                                    <cstring>pbAddClass</cstring>
-                                                </property>
-                                                <property name="text">
-                                                    <string>Add</string>
-                                                </property>
-                                            </widget>
-                                        </grid>
-                                    </widget>
-                                    <spacer>
-                                        <property name="name">
-                                            <cstring>spacer10</cstring>
-                                        </property>
-                                        <property name="orientation">
-                                            <enum>Vertical</enum>
-                                        </property>
-                                        <property name="sizeType">
-                                            <enum>Expanding</enum>
-                                        </property>
-                                        <property name="sizeHint">
-                                            <size>
-                                                <width>20</width>
-                                                <height>40</height>
-                                            </size>
+                                        <property name="text">
+                                            <string>Selected</string>
                                         </property>
-                                    </spacer>
-                                </vbox>
+                                    </widget>
+                                    <widget class="QPushButton" row="1" column="0">
+                                        <property name="name">
+                                            <cstring>pbRemoveAllIDs</cstring>
+                                        </property>
+                                        <property name="text">
+                                            <string>All</string>
+                                        </property>
+                                    </widget>
+                                </grid>
                             </widget>
-                        </hbox>
+                            <spacer>
+                                <property name="name">
+                                    <cstring>spacer13</cstring>
+                                </property>
+                                <property name="orientation">
+                                    <enum>Vertical</enum>
+                                </property>
+                                <property name="sizeType">
+                                    <enum>Expanding</enum>
+                                </property>
+                                <property name="sizeHint">
+                                    <size>
+                                        <width>20</width>
+                                        <height>40</height>
+                                    </size>
+                                </property>
+                            </spacer>
+                            <widget class="QGroupBox">
+                                <property name="name">
+                                    <cstring>groupBox7_2</cstring>
+                                </property>
+                                <property name="title">
+                                    <string>Add Selector</string>
+                                </property>
+                                <grid>
+                                    <property name="name">
+                                        <cstring>unnamed</cstring>
+                                    </property>
+                                    <widget class="QLineEdit" row="0" column="0">
+                                        <property name="name">
+                                            <cstring>leID</cstring>
+                                        </property>
+                                    </widget>
+                                    <widget class="QPushButton" row="1" column="0">
+                                        <property name="name">
+                                            <cstring>pbAddID</cstring>
+                                        </property>
+                                        <property name="text">
+                                            <string>Add</string>
+                                        </property>
+                                    </widget>
+                                </grid>
+                            </widget>
+                            <spacer>
+                                <property name="name">
+                                    <cstring>spacer14</cstring>
+                                </property>
+                                <property name="orientation">
+                                    <enum>Vertical</enum>
+                                </property>
+                                <property name="sizeType">
+                                    <enum>Expanding</enum>
+                                </property>
+                                <property name="sizeHint">
+                                    <size>
+                                        <width>20</width>
+                                        <height>40</height>
+                                    </size>
+                                </property>
+                            </spacer>
+                        </vbox>
                     </widget>
                 </grid>
             </widget>
@@ -543,7 +537,7 @@
                     <cstring>tab</cstring>
                 </property>
                 <attribute name="title">
-                    <string>IDs</string>
+                    <string>Classes</string>
                 </attribute>
                 <grid>
                     <property name="name">
@@ -573,7 +567,7 @@
                             </property>
                         </column>
                         <property name="name">
-                            <cstring>lvIDs</cstring>
+                            <cstring>lvClasses</cstring>
                         </property>
                         <property name="sizePolicy">
                             <sizepolicy>
@@ -593,152 +587,142 @@
                             <enum>LastColumn</enum>
                         </property>
                     </widget>
-                    <widget class="QLayoutWidget" row="0" column="1">
+                    <spacer row="0" column="1">
+                        <property name="name">
+                            <cstring>spacer19</cstring>
+                        </property>
+                        <property name="orientation">
+                            <enum>Horizontal</enum>
+                        </property>
+                        <property name="sizeType">
+                            <enum>Expanding</enum>
+                        </property>
+                        <property name="sizeHint">
+                            <size>
+                                <width>40</width>
+                                <height>20</height>
+                            </size>
+                        </property>
+                    </spacer>
+                    <widget class="QLayoutWidget" row="0" column="2">
                         <property name="name">
-                            <cstring>layout20</cstring>
+                            <cstring>layout13</cstring>
                         </property>
-                        <hbox>
+                        <vbox>
                             <property name="name">
                                 <cstring>unnamed</cstring>
                             </property>
                             <spacer>
                                 <property name="name">
-                                    <cstring>spacer18</cstring>
+                                    <cstring>spacer9</cstring>
                                 </property>
                                 <property name="orientation">
-                                    <enum>Horizontal</enum>
+                                    <enum>Vertical</enum>
                                 </property>
                                 <property name="sizeType">
                                     <enum>Expanding</enum>
                                 </property>
                                 <property name="sizeHint">
                                     <size>
-                                        <width>40</width>
-                                        <height>20</height>
+                                        <width>20</width>
+                                        <height>40</height>
                                     </size>
                                 </property>
                             </spacer>
-                            <widget class="QLayoutWidget">
+                            <widget class="QGroupBox">
                                 <property name="name">
-                                    <cstring>layout14</cstring>
+                                    <cstring>groupBox4_3</cstring>
+                                </property>
+                                <property name="title">
+                                    <string>Remove Selector</string>
+                                </property>
+                                <grid>
+                                    <property name="name">
+                                        <cstring>unnamed</cstring>
+                                    </property>
+                                    <widget class="QPushButton" row="0" column="0">
+                                        <property name="name">
+                                            <cstring>pbRemoveSelectedClass</cstring>
+                                        </property>
+                                        <property name="font">
+                                            <font>
+                                            </font>
+                                        </property>
+                                        <property name="text">
+                                            <string>Selected</string>
+                                        </property>
+                                    </widget>
+                                    <widget class="QPushButton" row="1" column="0">
+                                        <property name="name">
+                                            <cstring>pbRemoveAllClasses</cstring>
+                                        </property>
+                                        <property name="text">
+                                            <string>All</string>
+                                        </property>
+                                    </widget>
+                                </grid>
+                            </widget>
+                            <spacer>
+                                <property name="name">
+                                    <cstring>spacer11</cstring>
+                                </property>
+                                <property name="orientation">
+                                    <enum>Vertical</enum>
+                                </property>
+                                <property name="sizeType">
+                                    <enum>Expanding</enum>
+                                </property>
+                                <property name="sizeHint">
+                                    <size>
+                                        <width>20</width>
+                                        <height>40</height>
+                                    </size>
+                                </property>
+                            </spacer>
+                            <widget class="QGroupBox">
+                                <property name="name">
+                                    <cstring>groupBox7</cstring>
+                                </property>
+                                <property name="title">
+                                    <string>Add Selector</string>
                                 </property>
-                                <vbox>
+                                <grid>
                                     <property name="name">
                                         <cstring>unnamed</cstring>
                                     </property>
-                                    <spacer>
+                                    <widget class="QLineEdit" row="0" column="0">
                                         <property name="name">
-                                            <cstring>spacer12</cstring>
+                                            <cstring>leClass</cstring>
                                         </property>
-                                        <property name="orientation">
-                                            <enum>Vertical</enum>
+                                    </widget>
+                                    <widget class="QPushButton" row="1" column="0">
+                                        <property name="name">
+                                            <cstring>pbAddClass</cstring>
                                         </property>
-                                        <property name="sizeType">
-                                            <enum>Expanding</enum>
-                                        </property>
-                                        <property name="sizeHint">
-                                            <size>
-                                                <width>20</width>
-                                                <height>40</height>
-                                            </size>
-                                        </property>
-                                    </spacer>
-                                    <widget class="QGroupBox">
-                                        <property name="name">
-                                            <cstring>groupBox4_2</cstring>
-                                        </property>
-                                        <property name="title">
-                                            <string>Remove Selector</string>
-                                        </property>
-                                        <grid>
-                                            <property name="name">
-                                                <cstring>unnamed</cstring>
-                                            </property>
-                                            <widget class="QPushButton" row="0" column="0">
-                                                <property name="name">
-                                                    <cstring>pbRemoveSelectedID</cstring>
-                                                </property>
-                                                <property name="font">
-                                                    <font>
-                                                    </font>
-                                                </property>
-                                                <property name="text">
-                                                    <string>Selected</string>
-                                                </property>
-                                            </widget>
-                                            <widget class="QPushButton" row="1" column="0">
-                                                <property name="name">
-                                                    <cstring>pbRemoveAllIDs</cstring>
-                                                </property>
-                                                <property name="text">
-                                                    <string>All</string>
-                                                </property>
-                                            </widget>
-                                        </grid>
-                                    </widget>
-                                    <spacer>
-                                        <property name="name">
-                                            <cstring>spacer13</cstring>
-                                        </property>
-                                        <property name="orientation">
-                                            <enum>Vertical</enum>
-                                        </property>
-                                        <property name="sizeType">
-                                            <enum>Expanding</enum>
-                                        </property>
-                                        <property name="sizeHint">
-                                            <size>
-                                                <width>20</width>
-                                                <height>40</height>
-                                            </size>
-                                        </property>
-                                    </spacer>
-                                    <widget class="QGroupBox">
-                                        <property name="name">
-                                            <cstring>groupBox7_2</cstring>
-                                        </property>
-                                        <property name="title">
-                                            <string>Add Selector</string>
-                                        </property>
-                                        <grid>
-                                            <property name="name">
-                                                <cstring>unnamed</cstring>
-                                            </property>
-                                            <widget class="QLineEdit" row="0" column="0">
-                                                <property name="name">
-                                                    <cstring>leID</cstring>
-                                                </property>
-                                            </widget>
-                                            <widget class="QPushButton" row="1" column="0">
-                                                <property name="name">
-                                                    <cstring>pbAddID</cstring>
-                                                </property>
-                                                <property name="text">
-                                                    <string>Add</string>
-                                                </property>
-                                            </widget>
-                                        </grid>
-                                    </widget>
-                                    <spacer>
-                                        <property name="name">
-                                            <cstring>spacer14</cstring>
-                                        </property>
-                                        <property name="orientation">
-                                            <enum>Vertical</enum>
-                                        </property>
-                                        <property name="sizeType">
-                                            <enum>Expanding</enum>
-                                        </property>
-                                        <property name="sizeHint">
-                                            <size>
-                                                <width>20</width>
-                                                <height>40</height>
-                                            </size>
+                                        <property name="text">
+                                            <string>Add</string>
                                         </property>
-                                    </spacer>
-                                </vbox>
+                                    </widget>
+                                </grid>
                             </widget>
-                        </hbox>
+                            <spacer>
+                                <property name="name">
+                                    <cstring>spacer10</cstring>
+                                </property>
+                                <property name="orientation">
+                                    <enum>Vertical</enum>
+                                </property>
+                                <property name="sizeType">
+                                    <enum>Expanding</enum>
+                                </property>
+                                <property name="sizeHint">
+                                    <size>
+                                        <width>20</width>
+                                        <height>40</height>
+                                    </size>
+                                </property>
+                            </spacer>
+                        </vbox>
                     </widget>
                 </grid>
             </widget>
@@ -797,166 +781,189 @@
                             <enum>LastColumn</enum>
                         </property>
                     </widget>
-                    <widget class="QLayoutWidget" row="0" column="1">
+                    <spacer row="0" column="1">
+                        <property name="name">
+                            <cstring>spacer7</cstring>
+                        </property>
+                        <property name="orientation">
+                            <enum>Horizontal</enum>
+                        </property>
+                        <property name="sizeType">
+                            <enum>Expanding</enum>
+                        </property>
+                        <property name="sizeHint">
+                            <size>
+                                <width>40</width>
+                                <height>20</height>
+                            </size>
+                        </property>
+                    </spacer>
+                    <widget class="QLayoutWidget" row="0" column="2">
                         <property name="name">
-                            <cstring>layout18</cstring>
+                            <cstring>layout17</cstring>
                         </property>
-                        <hbox>
+                        <vbox>
                             <property name="name">
                                 <cstring>unnamed</cstring>
                             </property>
                             <spacer>
                                 <property name="name">
-                                    <cstring>spacer7</cstring>
+                                    <cstring>spacer15_2</cstring>
+                                </property>
+                                <property name="orientation">
+                                    <enum>Vertical</enum>
+                                </property>
+                                <property name="sizeType">
+                                    <enum>Expanding</enum>
+                                </property>
+                                <property name="sizeHint">
+                                    <size>
+                                        <width>20</width>
+                                        <height>40</height>
+                                    </size>
+                                </property>
+                            </spacer>
+                            <widget class="QGroupBox">
+                                <property name="name">
+                                    <cstring>groupBox4</cstring>
+                                </property>
+                                <property name="title">
+                                    <string>Remove Selector</string>
+                                </property>
+                                <grid>
+                                    <property name="name">
+                                        <cstring>unnamed</cstring>
+                                    </property>
+                                    <widget class="QPushButton" row="1" column="0">
+                                        <property name="name">
+                                            <cstring>pbRemoveAllPseudo</cstring>
+                                        </property>
+                                        <property name="text">
+                                            <string>All</string>
+                                        </property>
+                                    </widget>
+                                    <widget class="QPushButton" row="0" column="0">
+                                        <property name="name">
+                                            <cstring>pbRemoveSelectedPseudo</cstring>
+                                        </property>
+                                        <property name="font">
+                                            <font>
+                                            </font>
+                                        </property>
+                                        <property name="text">
+                                            <string>Selected</string>
+                                        </property>
+                                    </widget>
+                                </grid>
+                            </widget>
+                            <spacer>
+                                <property name="name">
+                                    <cstring>spacer16</cstring>
                                 </property>
                                 <property name="orientation">
-                                    <enum>Horizontal</enum>
+                                    <enum>Vertical</enum>
                                 </property>
                                 <property name="sizeType">
                                     <enum>Expanding</enum>
                                 </property>
                                 <property name="sizeHint">
                                     <size>
-                                        <width>30</width>
-                                        <height>20</height>
+                                        <width>20</width>
+                                        <height>40</height>
                                     </size>
                                 </property>
                             </spacer>
-                            <widget class="QLayoutWidget">
+                            <widget class="QGroupBox">
                                 <property name="name">
-                                    <cstring>layout17</cstring>
+                                    <cstring>groupBox7_3</cstring>
                                 </property>
-                                <vbox>
+                                <property name="title">
+                                    <string>Add Selector</string>
+                                </property>
+                                <grid>
                                     <property name="name">
                                         <cstring>unnamed</cstring>
                                     </property>
-                                    <spacer>
+                                    <widget class="QLineEdit" row="0" column="0">
                                         <property name="name">
-                                            <cstring>spacer15_2</cstring>
+                                            <cstring>lePseudoSelector</cstring>
                                         </property>
-                                        <property name="orientation">
-                                            <enum>Vertical</enum>
+                                    </widget>
+                                    <widget class="QComboBox" row="1" column="0">
+                                        <property name="name">
+                                            <cstring>cbPseudo</cstring>
+                                        </property>
+                                        <property name="editable">
+                                            <bool>true</bool>
+                                        </property>
+                                    </widget>
+                                    <widget class="QPushButton" row="2" column="0">
+                                        <property name="name">
+                                            <cstring>pbAddPseudo</cstring>
                                         </property>
-                                        <property name="sizeType">
-                                            <enum>Expanding</enum>
-                                        </property>
-                                        <property name="sizeHint">
-                                            <size>
-                                                <width>20</width>
-                                                <height>40</height>
-                                            </size>
-                                        </property>
-                                    </spacer>
-                                    <widget class="QGroupBox">
-                                        <property name="name">
-                                            <cstring>groupBox4</cstring>
-                                        </property>
-                                        <property name="title">
-                                            <string>Remove Selector</string>
-                                        </property>
-                                        <grid>
-                                            <property name="name">
-                                                <cstring>unnamed</cstring>
-                                            </property>
-                                            <widget class="QPushButton" row="1" column="0">
-                                                <property name="name">
-                                                    <cstring>pbRemoveAllPseudo</cstring>
-                                                </property>
-                                                <property name="text">
-                                                    <string>All</string>
-                                                </property>
-                                            </widget>
-                                            <widget class="QPushButton" row="0" column="0">
-                                                <property name="name">
-                                                    <cstring>pbRemoveSelectedPseudo</cstring>
-                                                </property>
-                                                <property name="font">
-                                                    <font>
-                                                    </font>
-                                                </property>
-                                                <property name="text">
-                                                    <string>Selected</string>
-                                                </property>
-                                            </widget>
-                                        </grid>
-                                    </widget>
-                                    <spacer>
-                                        <property name="name">
-                                            <cstring>spacer16</cstring>
-                                        </property>
-                                        <property name="orientation">
-                                            <enum>Vertical</enum>
-                                        </property>
-                                        <property name="sizeType">
-                                            <enum>Expanding</enum>
-                                        </property>
-                                        <property name="sizeHint">
-                                            <size>
-                                                <width>20</width>
-                                                <height>40</height>
-                                            </size>
-                                        </property>
-                                    </spacer>
-                                    <widget class="QGroupBox">
-                                        <property name="name">
-                                            <cstring>groupBox7_3</cstring>
-                                        </property>
-                                        <property name="title">
-                                            <string>Add Selector</string>
-                                        </property>
-                                        <grid>
-                                            <property name="name">
-                                                <cstring>unnamed</cstring>
-                                            </property>
-                                            <widget class="QLineEdit" row="0" column="0">
-                                                <property name="name">
-                                                    <cstring>lePseudoSelector</cstring>
-                                                </property>
-                                            </widget>
-                                            <widget class="QComboBox" row="1" column="0">
-                                                <property name="name">
-                                                    <cstring>cbPseudo</cstring>
-                                                </property>
-                                                <property name="editable">
-                                                    <bool>true</bool>
-                                                </property>
-                                            </widget>
-                                            <widget class="QPushButton" row="2" column="0">
-                                                <property name="name">
-                                                    <cstring>pbAddPseudo</cstring>
-                                                </property>
-                                                <property name="text">
-                                                    <string>Add</string>
-                                                </property>
-                                            </widget>
-                                        </grid>
-                                    </widget>
-                                    <spacer>
-                                        <property name="name">
-                                            <cstring>spacer17</cstring>
-                                        </property>
-                                        <property name="orientation">
-                                            <enum>Vertical</enum>
-                                        </property>
-                                        <property name="sizeType">
-                                            <enum>Expanding</enum>
-                                        </property>
-                                        <property name="sizeHint">
-                                            <size>
-                                                <width>20</width>
-                                                <height>40</height>
-                                            </size>
+                                        <property name="text">
+                                            <string>Add</string>
                                         </property>
-                                    </spacer>
-                                </vbox>
+                                    </widget>
+                                </grid>
                             </widget>
-                        </hbox>
+                            <spacer>
+                                <property name="name">
+                                    <cstring>spacer17</cstring>
+                                </property>
+                                <property name="orientation">
+                                    <enum>Vertical</enum>
+                                </property>
+                                <property name="sizeType">
+                                    <enum>Expanding</enum>
+                                </property>
+                                <property name="sizeHint">
+                                    <size>
+                                        <width>20</width>
+                                        <height>40</height>
+                                    </size>
+                                </property>
+                            </spacer>
+                        </vbox>
                     </widget>
                 </grid>
             </widget>
         </widget>
+        <spacer row="3" column="1">
+            <property name="name">
+                <cstring>spacer1</cstring>
+            </property>
+            <property name="orientation">
+                <enum>Horizontal</enum>
+            </property>
+            <property name="sizeType">
+                <enum>Expanding</enum>
+            </property>
+            <property name="sizeHint">
+                <size>
+                    <width>380</width>
+                    <height>20</height>
+                </size>
+            </property>
+        </spacer>
+        <widget class="KPushButton" row="3" column="0">
+            <property name="name">
+                <cstring>pbHelp</cstring>
+            </property>
+            <property name="enabled">
+                <bool>false</bool>
+            </property>
+            <property name="text">
+                <string>&amp;Help</string>
+            </property>
+            <property name="accel">
+                <string>Alt+H</string>
+            </property>
+        </widget>
     </grid>
 </widget>
+<customwidgets>
+</customwidgets>
 <connections>
     <connection>
         <sender>pbOk</sender>
@@ -972,4 +979,10 @@
     </connection>
 </connections>
 <layoutdefaults spacing="6" margin="11"/>
+<includehints>
+    <includehint>kurlrequester.h</includehint>
+    <includehint>klineedit.h</includehint>
+    <includehint>kpushbutton.h</includehint>
+    <includehint>kpushbutton.h</includehint>
+</includehints>
 </UI>
Only in /usr/CVS_KDE/kdewebdev/quanta/components/csseditor/data: .cvsignore
diff --recursive -uP /usr/CVS_KDE/kdewebdev/quanta/components/csseditor/data/CVS/Entries /home/simone/Desktop/kdewebdev/quanta/components/csseditor/data/CVS/Entries
--- /usr/CVS_KDE/kdewebdev/quanta/components/csseditor/data/CVS/Entries	2004-09-14 23:12:57.000000000 +0200
+++ /home/simone/Desktop/kdewebdev/quanta/components/csseditor/data/CVS/Entries	2004-06-23 17:33:43.000000000 +0200
@@ -1,7 +1,7 @@
-/.cvsignore/1.1/Tue Sep 14 21:12:56 2004//
-/Makefile.am/1.6/Tue Sep 14 21:12:56 2004//
-/atrules.xml/1.1/Tue Sep 14 21:12:56 2004//
-/config.xml/1.5/Tue Sep 14 21:12:56 2004//
-/dtdTags.xml/1.3/Tue Sep 14 21:12:57 2004//
-/pseudo.xml/1.2/Tue Sep 14 21:12:57 2004//
+/.cvsignore/1.1/Fri Sep 19 19:55:33 2003//
+/Makefile.am/1.6/Sun Jan 25 19:29:08 2004//
+/atrules.xml/1.1/Fri Sep 19 19:55:33 2003//
+/pseudo.xml/1.2/Sun Jan 25 19:29:08 2004//
+/config.xml/1.5/Thu Jun  3 18:12:39 2004//
+/dtdTags.xml/1.3/Thu Jun  3 18:12:39 2004//
 D
diff --recursive -uP /usr/CVS_KDE/kdewebdev/quanta/components/csseditor/data/config.xml /home/simone/Desktop/kdewebdev/quanta/components/csseditor/data/config.xml
--- /usr/CVS_KDE/kdewebdev/quanta/components/csseditor/data/config.xml	2004-09-14 23:12:56.000000000 +0200
+++ /home/simone/Desktop/kdewebdev/quanta/components/csseditor/data/config.xml	2004-08-11 09:52:13.000000000 +0200
@@ -25,11 +25,13 @@
   <elevation>  
     <list value="below,level,above,higher,lower,inherit"/>  
     <angle/> 
+    <freeedit/>
   </elevation>
    
   <pitch> 
     <list value="inherit,x-low,medium,high,x-high,low"/>
     <frequency/> 
+    <freeedit/>
   </pitch>
    
   <pitch-range>    
@@ -47,11 +49,13 @@
       <time/>
       <percentage/> 
       <list value="inherit"/>
+      <freeedit/>
     </pause-after>    
     <pause-before> 
       <time/>
       <percentage/> 
       <list value="inherit"/> 
+      <freeedit/>
     </pause-before>   
   </pause>
  
@@ -87,7 +91,7 @@
   </stress>
    
   <voice-family>      
-    <edit/>
+    <freeedit/>
      <list value="inherit"/> 
   </voice-family>
    
@@ -118,7 +122,7 @@
         <leftList value="top,center,bottom"/>
         <rightList value="left,center,right"/>      
       </doubleList>
-      <edit/>
+      <freeedit/>
       <doubleLength/>
       <doublePercentage/> 
       <list value="inherit" editable="yes"/>
@@ -137,7 +141,7 @@
       <list value="transparent,inherit" editable="yes"/>
     </border-color>   
     <border-spacing>     
-      <edit/>
+      <freeedit/>
       <doubleLength/>
       <list value="inherit" editable="yes"/> 
     </border-spacing>  
@@ -155,6 +159,7 @@
       <border-top-width>           
         <length/> 
         <list value="thin,medium,thick,inherit"/>
+        <freeedit/>
       </border-top-width> 
   </border-top>
      
@@ -172,6 +177,7 @@
    <border-left-width> 
     <length/>  
     <list value="thin,medium,thick,inherit"/>
+    <freeedit/>
    </border-left-width>
    
   </border-left>
@@ -190,6 +196,7 @@
   <border-right-width>    
     <length/> 
     <list value="thin,medium,thick,inherit"/>
+    <freeedit/>
   </border-right-width>
    
   </border-right> 
@@ -207,7 +214,8 @@
        
   <border-bottom-width> 
     <length/>
-    <list value="thin,medium,thick,inherit"/> 
+    <list value="thin,medium,thick,inherit"/>
+    <freeedit/> 
   </border-bottom-width>
      
   </border-bottom> 
@@ -223,6 +231,7 @@
     <length/>
     <percentage/>
     <list value="auto,inherit"/>
+    <freeedit/>
   </bottom>
     
  <caption-side>
@@ -273,6 +282,7 @@
       <length/>
       <percentage/>  
       <list value="xx-small,x-small,small,medium,large,x-large,xx-large,larger,smaller,inherit"/> 
+      <freeedit/>
      </font-size> 
       
      <font-style>
@@ -292,18 +302,21 @@
     <height>       
       <length/>
       <percentage/>  
-      <list value="auto,inherit"/>   
+      <list value="auto,inherit"/>  
+      <freeedit/> 
     </height>
     
     <left>         
        <length/>
        <percentage/>
        <list value="auto,inherit"/>
+       <freeedit/>
     </left>
     
     <letter-spacing>            
        <length/> 
-       <list value="normal,inherit"/>  
+       <list value="normal,inherit"/> 
+       <freeedit/> 
     </letter-spacing>
     
     <line-height>        
@@ -311,6 +324,7 @@
       <percentage/>    
       <number/>
       <list value="normal,inherit"/>
+      <freeedit/>
     </line-height>
     
     <list-style hasSub="yes">   
@@ -330,47 +344,55 @@
     <margin-left>          
       <length/>
       <percentage/>  
-      <list value="auto"/>   
+      <list value="auto"/>  
+      <freeedit/> 
     </margin-left> 
     <margin-bottom>        
       <length/>
       <percentage/>  
-      <list value="auto"/>   
+      <list value="auto"/>  
+      <freeedit/> 
     </margin-bottom>
     <margin-right>     
       <length/>
       <percentage/>  
       <list value="auto"/> 
+      <freeedit/>
     </margin-right> 
     <margin-top>        
       <length/>
       <percentage/>  
-      <list value="auto"/>   
+      <list value="auto"/>  
+      <freeedit/> 
     </margin-top>  
   </margin>
     
   <max-height>      
     <length/>
     <percentage/>
-    <list value="none,inherit"/>   
+    <list value="none,inherit"/> 
+    <freeedit/>  
   </max-height>
     
   <max-width>     
     <length/>
     <percentage/>  
     <list value="none,inherit"/>  
+    <freeedit/>
   </max-width>
     
   <min-height>    
     <length/>
     <percentage/> 
-    <list value="none,inherit"/>    
+    <list value="none,inherit"/> 
+    <freeedit/>   
   </min-height> 
      
   <min-width>         
     <length/>
     <percentage/>  
     <list value="none,inherit"/>   
+    <freeedit/>
   </min-width>
   
   <outline hasSub="yes">
@@ -383,7 +405,8 @@
     </outline-style>    
     <outline-width> 
       <length/> 
-      <list value="thin,medium,thick,inherit"/>  
+      <list value="thin,medium,thick,inherit"/>
+      <freeedit/>  
     </outline-width>    
   </outline> 
   
@@ -395,23 +418,27 @@
     <padding-top>  
       <length/>  
       <list value="thin,medium,thick,inherit"/>
+      <freeedit/>
     </padding-top> 
     <padding-right> 
       <length/>
       <list value="thin,medium,thick,inherit"/>
+      <freeedit/>
     </padding-right>
     <padding-bottom>
       <length/>
       <list value="thin,medium,thick,inherit"/>
+      <freeedit/>
     </padding-bottom>  
     <padding-left> 
       <length/>
       <list value="thin,medium,thick,inherit"/>
+      <freeedit/>
     </padding-left>  
   </padding>
        
   <page>               
-    <edit/>  
+    <freeedit/>  
     <list value="auto"/> 
   </page>
     
@@ -439,6 +466,7 @@
     <length/>
     <percentage/>
     <list value="auto,inherit"/>   
+    <freeedit/>
   </right>
     
   <table-layout>
@@ -454,13 +482,14 @@
    <doubleList> 
         <leftList value="none,underline,overline,line-through,blink,inherit"/>
         <rightList value="none,underline,overline,line-through,blink,inherit"/>      
-      </doubleList> 
+   </doubleList> 
   </text-decoration>
     
   <text-indent>           
     <length/>
     <percentage/>  
     <list value="inherit"/>    
+    <freeedit/>
   </text-indent>
        
   <text-transform> 
@@ -471,6 +500,7 @@
     <length/>
     <percentage/> 
     <list value="auto,inherit"/> 
+    <freeedit/>
   </top> 
     
   <unicode-bidi>
@@ -480,7 +510,8 @@
   <vertical-align>     
     <list value="baseline,inherit,sub,super,top,text-top,middle,bottom,text-bottom"/>      
     <length/>
-    <percentage/>     
+    <percentage/>  
+    <freeedit/>   
   </vertical-align>
      
   <visibility>
@@ -495,11 +526,13 @@
     <length/>
     <percentage/>
     <list value="auto,inherit"/>  
+    <freeedit/>
   </width>
     
   <word-spacing>          
     <length/> 
     <list value="auto,inherit"/> 
+    <freeedit/>
   </word-spacing>
      
   <z-index>      
@@ -513,7 +546,7 @@
        
   <page>    
     <list value="auto"/>            
-    <edit/> 
+    <freeedit/> 
   </page> 
      
   <page-break-after>
@@ -548,6 +581,7 @@
     <outline-width>    
       <length/> 
       <list value="thin,medium,thick,inherit"/> 
+      <freeedit/>
     </outline-width>      
  </outline>
     
diff --recursive -uP /usr/CVS_KDE/kdewebdev/quanta/components/csseditor/doubleeditors.cpp /home/simone/Desktop/kdewebdev/quanta/components/csseditor/doubleeditors.cpp
--- /usr/CVS_KDE/kdewebdev/quanta/components/csseditor/doubleeditors.cpp	2004-09-14 23:12:49.000000000 +0200
+++ /home/simone/Desktop/kdewebdev/quanta/components/csseditor/doubleeditors.cpp	2004-08-10 10:36:25.000000000 +0200
@@ -18,9 +18,12 @@
  #include "specialsb.h"
  #include <qcombobox.h>
  #include "csseditor_globals.h"
+ #include "propertysetter.h"
  #include <qregexp.h>
  
-doubleEditorBase::doubleEditorBase(QWidget *parent, const char *name) : QHBox(parent,name){
+
+ 
+doubleEditorBase::doubleEditorBase(QWidget *parent, const char *name) : miniEditor(parent,name){
 }
 
 void doubleEditorBase::sxValueSlot(const QString& v){
@@ -34,6 +37,7 @@
 } 
  
  doubleLengthEditor::doubleLengthEditor(QWidget *parent, const char *name) : doubleEditorBase(parent,name){
+  
   m_ssbSx = new specialSB(this);
   m_ssbSx->insertItem("cm");
   m_ssbSx->insertItem("em");
@@ -63,20 +67,13 @@
   delete m_ssbDx;
 }
 
+void doubleLengthEditor::connectToPropertySetter(propertySetter* p){
+  connect(this, SIGNAL(valueChanged(const QString&)), p ,SIGNAL(valueChanged(const QString&)));
+}
+
 void doubleLengthEditor::setInitialValue(QString sx, QString dx){
-  QRegExp pattern("\\d"+m_ssbSx->cbValueList().join("|"));
-  
-  if(sx.contains(pattern)) {
-    QString temp1(sx.stripWhiteSpace()),
-                 temp2(sx.stripWhiteSpace());
-    m_ssbSx->setInitialValue(temp1.remove(QRegExp("\\D")), temp2.remove(QRegExp("\\d")));
-  }
-  
-  if(dx.contains(pattern)) {
-    QString temp1(dx.stripWhiteSpace()),
-                 temp2(dx.stripWhiteSpace());
-    m_ssbDx->setInitialValue(temp1.remove(QRegExp("\\D")), temp2.remove(QRegExp("\\d")));
-  }
+  m_ssbSx->setInitialValue(sx);
+  m_ssbDx->setInitialValue(dx);
 }
 
 doubleComboBoxEditor::doubleComboBoxEditor(QWidget *parent, const char *name) : doubleEditorBase(parent,name){
@@ -91,6 +88,10 @@
   delete m_cbDx;
 }
 
+void doubleComboBoxEditor::connectToPropertySetter(propertySetter* p){
+  connect(this, SIGNAL(valueChanged(const QString&)), p ,SIGNAL(valueChanged(const QString&)));
+}
+
 doublePercentageEditor::doublePercentageEditor(QWidget *parent, const char *name) : doubleEditorBase(parent,name){
   m_sbSx = new mySpinBox(this);
   m_sbDx = new mySpinBox(this);
@@ -105,6 +106,10 @@
   delete m_sbDx;
 }
 
+void doublePercentageEditor::connectToPropertySetter(propertySetter* p){
+  connect(this, SIGNAL(valueChanged(const QString&)), p ,SIGNAL(valueChanged(const QString&)));
+}
+
 void doublePercentageEditor::setInitialValue(QString sx, QString dx){
   m_sbSx->setValue(sx.remove("%").toInt());
   m_sbDx->setValue(dx.remove("%").toInt());
diff --recursive -uP /usr/CVS_KDE/kdewebdev/quanta/components/csseditor/doubleeditors.h /home/simone/Desktop/kdewebdev/quanta/components/csseditor/doubleeditors.h
--- /usr/CVS_KDE/kdewebdev/quanta/components/csseditor/doubleeditors.h	2004-09-14 23:12:49.000000000 +0200
+++ /home/simone/Desktop/kdewebdev/quanta/components/csseditor/doubleeditors.h	2004-08-09 21:16:13.000000000 +0200
@@ -16,14 +16,14 @@
  ***************************************************************************/
  #ifndef DOUBLEEDITORS_H
  #define DOUBLEEDITORS_H
- #include <qhbox.h>
+ #include "minieditor.h"
  
  class mySpinBox;
  class specialSB;
  class QSpinBox;
  class QComboBox;
  
-class doubleEditorBase : public QHBox {
+class doubleEditorBase : public miniEditor {
     Q_OBJECT
   protected:
     QString   m_sxValue,
@@ -33,6 +33,7 @@
     doubleEditorBase(QWidget *parent=0, const char *name=0);
     virtual ~doubleEditorBase(){}
     virtual void setInitialValue(){}
+    virtual void connectToPropertySetter(propertySetter* p){};
 
    public slots:
      void sxValueSlot(const QString&);
@@ -52,6 +53,7 @@
     doublePercentageEditor(QWidget *parent=0, const char *name=0);
     virtual ~doublePercentageEditor();
     virtual void setInitialValue(QString sx, QString dx);
+    virtual void connectToPropertySetter(propertySetter* p);
 };
 
 class doubleComboBoxEditor : public doubleEditorBase {
@@ -65,6 +67,7 @@
     virtual ~doubleComboBoxEditor();
     QComboBox* cbSx() const { return m_cbSx;}
     QComboBox* cbDx() const { return m_cbDx;}
+    virtual void connectToPropertySetter(propertySetter* p);
 };
 
 class doubleLengthEditor : public doubleEditorBase {
@@ -77,6 +80,7 @@
     doubleLengthEditor(QWidget *parent=0, const char *name=0);
     virtual ~doubleLengthEditor();
     virtual void setInitialValue(QString sx, QString dx);
+    virtual void connectToPropertySetter(propertySetter* p);
 };
 
 #endif
diff --recursive -uP /usr/CVS_KDE/kdewebdev/quanta/components/csseditor/fontfamilychooser.cpp /home/simone/Desktop/kdewebdev/quanta/components/csseditor/fontfamilychooser.cpp
--- /usr/CVS_KDE/kdewebdev/quanta/components/csseditor/fontfamilychooser.cpp	2004-09-14 23:12:50.000000000 +0200
+++ /home/simone/Desktop/kdewebdev/quanta/components/csseditor/fontfamilychooser.cpp	2004-08-15 19:52:52.000000000 +0200
@@ -28,6 +28,7 @@
 #include <kglobalsettings.h>
 #include <qregexp.h>
 #include <qlineedit.h>
+#include <qwhatsthis.h>
 
 #include<kdebug.h>
 
@@ -79,6 +80,15 @@
   connect( pbRemove, SIGNAL( clicked() ), this, SLOT( removeFont() ) );
   connect( pbMoveUp, SIGNAL( clicked() ), this, SLOT( moveFontUp() ) );
   connect( pbMoveDown, SIGNAL( clicked() ), this, SLOT( moveFontDown() ) );
+  
+  QWhatsThis::add(lbAvailable,i18n("These are the names ot the available fonts on your system"));
+  QWhatsThis::add(lbGeneric,i18n("These are the names ot the generic fonts "));
+  QWhatsThis::add(lbSelected,i18n("These are the names ot the generic fonts you have selected  "));
+  QWhatsThis::add(pbAdd,i18n("Click this to add to add a font to your style sheet"));
+  QWhatsThis::add(pbRemove,i18n("Click this to remove a font from your style sheet"));
+  QWhatsThis::add(pbMoveUp,i18n("Click this to make the font more preferable than the preceeding one"));
+  QWhatsThis::add(pbMoveDown,i18n("Click this to make the font less preferable than the following one"));
+  
 }
  
 fontFamilyChooser::~fontFamilyChooser(){} 
diff --recursive -uP /usr/CVS_KDE/kdewebdev/quanta/components/csseditor/fontfamilychoosers.ui /home/simone/Desktop/kdewebdev/quanta/components/csseditor/fontfamilychoosers.ui
--- /usr/CVS_KDE/kdewebdev/quanta/components/csseditor/fontfamilychoosers.ui	2004-09-14 23:12:51.000000000 +0200
+++ /home/simone/Desktop/kdewebdev/quanta/components/csseditor/fontfamilychoosers.ui	2004-08-05 11:58:38.000000000 +0200
@@ -1,4 +1,4 @@
-<!DOCTYPE UI><UI version="3.1" stdsetdef="1">
+<!DOCTYPE UI><UI version="3.3" stdsetdef="1">
 <class>fontFamilyChooserS</class>
 <widget class="QDialog">
     <property name="name">
@@ -23,6 +23,9 @@
     <property name="caption">
         <string>Font Family Chooser</string>
     </property>
+    <property name="sizeGripEnabled">
+        <bool>true</bool>
+    </property>
     <grid>
         <property name="name">
             <cstring>unnamed</cstring>
@@ -361,14 +364,6 @@
                         <property name="name">
                             <cstring>unnamed</cstring>
                         </property>
-                        <widget class="KPushButton">
-                            <property name="name">
-                                <cstring>pbHelp</cstring>
-                            </property>
-                            <property name="text">
-                                <string>&amp;Help</string>
-                            </property>
-                        </widget>
                         <spacer>
                             <property name="name">
                                 <cstring>spacer1</cstring>
@@ -418,6 +413,8 @@
         </widget>
     </grid>
 </widget>
+<customwidgets>
+</customwidgets>
 <connections>
     <connection>
         <sender>pbCancel</sender>
@@ -433,4 +430,12 @@
     </connection>
 </connections>
 <layoutdefaults spacing="6" margin="11"/>
+<includehints>
+    <includehint>kpushbutton.h</includehint>
+    <includehint>kpushbutton.h</includehint>
+    <includehint>kpushbutton.h</includehint>
+    <includehint>kpushbutton.h</includehint>
+    <includehint>kpushbutton.h</includehint>
+    <includehint>kpushbutton.h</includehint>
+</includehints>
 </UI>
diff --recursive -uP /usr/CVS_KDE/kdewebdev/quanta/components/csseditor/minieditor.h /home/simone/Desktop/kdewebdev/quanta/components/csseditor/minieditor.h
--- /usr/CVS_KDE/kdewebdev/quanta/components/csseditor/minieditor.h	1970-01-01 01:00:00.000000000 +0100
+++ /home/simone/Desktop/kdewebdev/quanta/components/csseditor/minieditor.h	2004-08-09 18:17:51.000000000 +0200
@@ -0,0 +1,37 @@
+/***************************************************************************
+                          minieditor.h  -  description
+                             -------------------
+    begin                : lun ago 9 2004
+    copyright            : (C) 2004 by gulmini luciano
+    email                : gulmini.luciano@student.unife.it
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#ifndef MINIEDITOR_H
+#define MINIEDITOR_H
+
+#include <qhbox.h>
+
+/**
+  *@author gulmini luciano
+  */
+
+class propertySetter;  
+  
+class miniEditor : public QHBox{
+  public:
+    miniEditor(QWidget *parent=0, const char *name=0):QHBox(parent,name){}
+    ~miniEditor(){}
+    virtual void connectToPropertySetter(propertySetter* p)=0;
+};
+  
+
+#endif
diff --recursive -uP /usr/CVS_KDE/kdewebdev/quanta/components/csseditor/percentageeditor.cpp /home/simone/Desktop/kdewebdev/quanta/components/csseditor/percentageeditor.cpp
--- /usr/CVS_KDE/kdewebdev/quanta/components/csseditor/percentageeditor.cpp	1970-01-01 01:00:00.000000000 +0100
+++ /home/simone/Desktop/kdewebdev/quanta/components/csseditor/percentageeditor.cpp	2004-08-09 18:24:24.000000000 +0200
@@ -0,0 +1,38 @@
+/***************************************************************************
+                          percentageeditor.cpp  -  description
+                             -------------------
+    begin                : lun ago 9 2004
+    copyright            : (C) 2004 by gulmini luciano
+    email                : gulmini.luciano@student.unife.it
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#include "percentageeditor.h"
+#include "propertysetter.h"
+
+percentageEditor::percentageEditor(const QString& initialValue, QWidget *parent, const char *name) : miniEditor(parent,name)
+{
+  QString temp(initialValue);
+  m_sb = new mySpinBox(0,9999,1,this);
+  m_sb->setValue(temp.remove("%").toInt());
+  m_sb->setSuffix("%");
+  connect(m_sb, SIGNAL(valueChanged ( const QString & )), this, SIGNAL(valueChanged(const QString&)));
+}
+
+percentageEditor::~percentageEditor()
+{
+  delete m_sb;
+}
+
+void percentageEditor::connectToPropertySetter(propertySetter* p){
+  connect( this, SIGNAL(valueChanged(const QString&)), p, SIGNAL(valueChanged(const QString&)));
+}
+
+#include "percentageeditor.moc"
diff --recursive -uP /usr/CVS_KDE/kdewebdev/quanta/components/csseditor/percentageeditor.h /home/simone/Desktop/kdewebdev/quanta/components/csseditor/percentageeditor.h
--- /usr/CVS_KDE/kdewebdev/quanta/components/csseditor/percentageeditor.h	1970-01-01 01:00:00.000000000 +0100
+++ /home/simone/Desktop/kdewebdev/quanta/components/csseditor/percentageeditor.h	2004-08-09 18:20:19.000000000 +0200
@@ -0,0 +1,52 @@
+/***************************************************************************
+                          percentageeeditor.h  -  description
+                             -------------------
+    begin                : lun ago 9 2004
+    copyright            : (C) 2004 by gulmini luciano
+    email                : gulmini.luciano@student.unife.it
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#ifndef PERCENTAGEEDITOR_H
+#define PERCENTAGEEDITOR_H
+
+#include <qhbox.h>
+#include <qptrlist.h>
+#include "doubleeditors.h"
+#include <qcombobox.h>
+#include <qslider.h>
+
+#include "csseditor_globals.h"
+#include "minieditor.h"
+
+class KPushButton;
+
+
+/**
+  *@author gulmini luciano
+  */
+ 
+class propertySetter;  
+   
+class percentageEditor : public miniEditor {
+     Q_OBJECT
+   private:
+     mySpinBox *m_sb;
+   public:
+           percentageEditor(const QString& initialValue="0",QWidget *parent=0, const char *name=0);
+           ~percentageEditor();
+           virtual void connectToPropertySetter(propertySetter* p);
+   signals:
+     void valueChanged(const QString&);
+};
+
+
+#endif
diff --recursive -uP /usr/CVS_KDE/kdewebdev/quanta/components/csseditor/propertysetter.cpp /home/simone/Desktop/kdewebdev/quanta/components/csseditor/propertysetter.cpp
--- /usr/CVS_KDE/kdewebdev/quanta/components/csseditor/propertysetter.cpp	2004-09-14 23:12:54.000000000 +0200
+++ /home/simone/Desktop/kdewebdev/quanta/components/csseditor/propertysetter.cpp	2004-08-15 19:59:13.000000000 +0200
@@ -23,6 +23,7 @@
 #include <qlabel.h>
 #include <qtooltip.h>
 #include <qregexp.h>
+#include <qvbox.h>
 
 #include <kpushbutton.h>
 #include <kdebug.h>
@@ -31,30 +32,15 @@
 #include <klocale.h>
 #include <klineedit.h>
 
-#include "colorrequester.h"
-#include "specialsb.h"
+
 #include "csseditor_globals.h"
-#include "tlpeditors.h"
+#include "minieditor.h"
 
 propertySetter::propertySetter(QWidget *parent, const char *name ) : QHBox(parent,name) {
   m_ind = 0;
   m_cb = 0L;
-  m_le = 0L;
-  m_sb = 0L;
-  m_lE = 0L;
-  m_dlE = 0L;
-  m_dpe = 0L;
-  m_dcbe = 0L;
-  m_pe = 0L;
-  m_ue = 0L;
-  m_fe = 0L;
-  m_te = 0L;
-  m_ae = 0L;
-  m_cr = 0L;
-  m_pb = 0L;
-  m_pcb = 0L;
-  m_ftE = 0L;
   m_list.setAutoDelete(true);
+  m_pb = 0L;
   setSpacing( KDialog::spacingHint() );
 }
 
@@ -71,14 +57,6 @@
   m_ind=0;
 }
 
-void propertySetter::setFontEditor(const QString& s)
-{
-  m_ftE = new fontEditor(this);
-  connect(m_ftE, SIGNAL(valueChanged(const QString&)), this, SIGNAL(valueChanged(const QString&)));
-  m_ftE->setInitialValue(s);
-  m_list.append(m_ftE);
-}
-
 void propertySetter::setComboBox()
 {
   m_cb = new QComboBox(this);
@@ -89,156 +67,52 @@
 
 void propertySetter::setSpinBox(const QString& initialValue, const QString& min, const QString& max, const QString& s)
 {
-  m_sb = new mySpinBox(min.toInt(), max.toInt(), 1, this);
-  m_sb->setSuffix(s);
-  m_sb->setValue(initialValue.toInt());
-  connect(m_sb, SIGNAL(valueChanged(const QString&)), this ,SIGNAL(valueChanged(const QString&)));
-  m_list.append(m_sb);
+  mySpinBox *editor = new mySpinBox(min.toInt(), max.toInt(), 1, this);
+  editor->setSuffix(s);
+  editor->setValue(initialValue.toInt());
+  connect(editor, SIGNAL(valueChanged(const QString&)), this ,SIGNAL(valueChanged(const QString&)));
+  m_list.append(editor);
 }
 
 void propertySetter::setLineEdit()
 {
-  m_le = new QLineEdit(this);
-  connect(m_le,SIGNAL(textChanged ( const QString & )), this, SIGNAL(valueChanged ( const QString & )));
-  m_list.append(m_le);
-}
-
-void propertySetter::setLengthEditor(const QString& s){
-  m_lE = new lengthEditor(this);
-  QRegExp pattern("\\d("+m_lE->cbValueList().join("|")+")");
-  if(s.contains(pattern) > 0  ) {
-    QString temp1(s.stripWhiteSpace()),
-                 temp2(s.stripWhiteSpace());
-    m_lE->setInitialValue(temp1.remove(QRegExp("\\D")), temp2.remove(QRegExp("\\d")));
-  }
-  connect(m_lE, SIGNAL(valueChanged(const QString&)), this ,SIGNAL(valueChanged(const QString&)));
-  m_list.append(m_lE);
-}
-
-void propertySetter::setDoubleLengthEditor(const QString& s){
-  QString temp(s.simplifyWhiteSpace()),
-               sx(temp.section(" ",0,0)),
-               dx(temp.section(" ",1,1));
-
-  m_dlE = new doubleLengthEditor(this);
-  m_dlE->setInitialValue(sx,dx);
-  connect(m_dlE, SIGNAL(valueChanged(const QString&)), this ,SIGNAL(valueChanged(const QString&)));
-  m_list.append(m_dlE);
-}
-
-void propertySetter::setFrequencyEditor(const QString& s){
-  m_fe = new frequencyEditor(this);
-  QRegExp pattern("\\d("+m_fe->cbValueList().join("|")+")");
-
-  if(s.contains(pattern)) {
-    QString temp1(s.stripWhiteSpace()),
-                 temp2(s.stripWhiteSpace());
-
-    m_fe->setInitialValue(temp1.remove(QRegExp("\\D")), temp2.remove(QRegExp("\\d")));
-  }
-  connect(m_fe, SIGNAL(valueChanged(const QString&)), this ,SIGNAL(valueChanged(const QString&)));
-  m_list.append(m_fe);
-}
-
-void propertySetter::setTimeEditor(const QString& s){
-  m_te = new timeEditor(this);
-  QRegExp pattern("\\d("+m_te->cbValueList().join("|")+")");
-
-  if(s.contains(pattern)) {
-    QString temp1(s.stripWhiteSpace()),
-                 temp2(s.stripWhiteSpace());
-
-    m_te->setInitialValue(temp1.remove(QRegExp("\\D")), temp2.remove(QRegExp("\\d")));
-  }
-  connect(m_te, SIGNAL(valueChanged(const QString&)), this ,SIGNAL(valueChanged(const QString&)));
-  m_list.append(m_te);
-}
-
-void propertySetter::setAngleEditor(const QString& s){
-  m_ae = new angleEditor(this);
-  QRegExp pattern("\\d("+m_ae->cbValueList().join("|")+")");
-
-  if(s.contains(pattern)) {
-    QString temp1(s.stripWhiteSpace()),
-                 temp2(s.stripWhiteSpace());
-
-    m_ae->setInitialValue(temp1.remove(QRegExp("\\D")), temp2.remove(QRegExp("\\d")));
-  }
-  connect(m_ae, SIGNAL(valueChanged(const QString&)), this ,SIGNAL(valueChanged(const QString&)));
-  m_list.append(m_ae);
-}
-
-void propertySetter::setUriEditor(){
-  m_ue = new URIEditor(this);
-  connect(m_ue, SIGNAL(valueChanged(const QString&)), this ,SIGNAL(valueChanged(const QString&)));
-  m_list.append(m_ue);
-}
-
-void propertySetter::setDoublePercentageEditor(const QString& s)
-{
-  QString temp(s.simplifyWhiteSpace()),
-               sx(temp.section(" ",0,0)),
-               dx(temp.section(" ",1,1));
-  m_dpe = new doublePercentageEditor(this);
-  m_dpe->setInitialValue(sx,dx);
-  connect(m_dpe, SIGNAL(valueChanged(const QString&)), this, SIGNAL(valueChanged(const QString&)));
-  m_list.append(m_dpe);
-}
-
-void propertySetter::setDoubleComboBoxEditor()
-{
-  m_dcbe = new doubleComboBoxEditor(this);
-  connect(m_dcbe, SIGNAL(valueChanged(const QString&)), this, SIGNAL(valueChanged(const QString&)));
-  m_list.append(m_dcbe);
-}
-
-void propertySetter::setPercentageEditor(const QString& s)
-{
-  m_pe = new percentageEditor(s, this);
-  connect(m_pe, SIGNAL(valueChanged(const QString&)), this, SIGNAL(valueChanged(const QString&)));
-  m_list.append(m_pe);
-}
-
-void propertySetter::setColorRequester(const QString& s)
-{
-  m_cr = new colorRequester(this);
-  m_cr->lineEdit()->setText(s);
-  m_cr->setInitialValue();
-  connect(m_cr, SIGNAL(textChanged(const QString&)), this, SIGNAL(valueChanged(const QString&)));
-  m_list.append(m_cr);
+  QLineEdit *editor = new QLineEdit(this);
+  connect(editor,SIGNAL(textChanged ( const QString & )), this, SIGNAL(valueChanged ( const QString & )));
+  m_list.append(editor);
 }
 
-void propertySetter::setPredefinedColorListEditor(const QString& s)
-{
-  Q_UNUSED(s);
-  m_pcb = new QComboBox(this);
-  m_pcb->insertStringList(CSSEditorGlobals::HTMLColors);
-  connect(m_pcb, SIGNAL(activated(const QString&)), this, SIGNAL(valueChanged(const QString&)));
-  m_list.append(m_pcb);
+void propertySetter::setPredefinedColorListEditor()
+{  
+  QComboBox *editor = new QComboBox(this);
+  editor->insertStringList(CSSEditorGlobals::HTMLColors);
+  connect(editor, SIGNAL(activated(const QString&)), this, SIGNAL(valueChanged(const QString&)));
+  m_list.append(editor);
 }
 
 void propertySetter::Show(){
   QWidget *w;
-  for (w = m_list.first(); w; w = m_list.next())
-      w->hide();
-  if (m_list.at(m_ind))
-    m_list.at(m_ind)->show();
+  for ( w = m_list.first(); w; w = m_list.next() )  
+    w->hide();
+    
+  m_list.at(m_ind)->show();
+  
   if(m_list.count() == 1) {
-    if(m_pb) m_pb->hide();
+    if(m_pb) 
+      m_pb->hide();
   }
-  else
-    if(m_ind<m_list.count()-1) {
+  else  
+    if(m_ind<(m_list.count()-1)) { 
       m_ind++;
       m_pb->show();
     }
-    else m_ind=0;
+    else 
+      m_ind=0;
 }
 
 void propertySetter::addButton(){
 
   m_pb = new KPushButton(this);
   QToolTip::add(m_pb, i18n( "More..." ));
-  //pb->hide();
   QIconSet iconSet = SmallIconSet(QString::fromLatin1("2rightarrow"));
   QPixmap pixMap = iconSet.pixmap( QIconSet::Small, QIconSet::Normal );
   m_pb->setIconSet(iconSet);
@@ -246,20 +120,10 @@
   m_pb->hide();
   connect(m_pb, SIGNAL(clicked()), this ,SLOT(Show()));
 }
-
-percentageEditor::percentageEditor(const QString& initialValue, QWidget *parent, const char *name) : QHBox(parent,name)
-{
-  QString temp(initialValue);
-  m_sb = new mySpinBox(0,9999,1,this);
-  m_sb->setValue(temp.remove("%").toInt());
-  m_sb->setSuffix("%");
-  connect(m_sb, SIGNAL(valueChanged ( const QString & )), this, SIGNAL(valueChanged(const QString&)));
-}
-
-percentageEditor::~percentageEditor()
-{
-  delete m_sb;
+    
+void propertySetter::installMiniEditor(miniEditor *m){
+  m->connectToPropertySetter(this);
+  m_list.append(m);
 }
 
-
 #include "propertysetter.moc"
diff --recursive -uP /usr/CVS_KDE/kdewebdev/quanta/components/csseditor/propertysetter.h /home/simone/Desktop/kdewebdev/quanta/components/csseditor/propertysetter.h
--- /usr/CVS_KDE/kdewebdev/quanta/components/csseditor/propertysetter.h	2004-09-14 23:12:54.000000000 +0200
+++ /home/simone/Desktop/kdewebdev/quanta/components/csseditor/propertysetter.h	2004-08-10 10:56:55.000000000 +0200
@@ -20,37 +20,17 @@
 
 #include <qhbox.h>
 #include <qptrlist.h>
-#include "doubleeditors.h"
 #include <qcombobox.h>
-class QLabel;
-class QLineEdit;
-class mySpinBox;
-class QStringList;
+
+
+class miniEditor;
 class KPushButton;
-class angleEditor;
-class colorRequester;
-class frequencyEditor;
-class lengthEditor;
-class specialSB;
-class timeEditor;
-class fontEditor;
-class URIEditor;
+
 
 /**
   *@author gulmini luciano
   */
-
-class percentageEditor : public QHBox  {
-     Q_OBJECT
-   private:
-     mySpinBox *m_sb;
-   public:
-           percentageEditor(const QString& initialValue="0",QWidget *parent=0, const char *name=0);
-           ~percentageEditor();
-   signals:
-     void valueChanged(const QString&);
-};
-
+  
 class propertySetter : public QHBox  {
   Q_OBJECT
 
@@ -58,45 +38,21 @@
     unsigned int m_ind;
     QPtrList<QWidget> m_list;
     QComboBox *m_cb;
-    QLineEdit *m_le;
-    mySpinBox  *m_sb;
-    lengthEditor *m_lE;
-    doubleLengthEditor *m_dlE;
-    doublePercentageEditor *m_dpe;
-    doubleComboBoxEditor *m_dcbe;
-    percentageEditor *m_pe;
-    URIEditor *m_ue;
-    frequencyEditor *m_fe;
-    timeEditor *m_te;
-    angleEditor *m_ae;
-    colorRequester *m_cr;
-    QComboBox *m_pcb;
     KPushButton *m_pb;
-    fontEditor *m_ftE;
 
   public:
     propertySetter(QWidget *parent=0, const char *name=0);
     ~propertySetter();
-    void setFontEditor(const QString& s=QString::null);
+    
+    void installMiniEditor(miniEditor *m); 
+    
     void setComboBox();
     void setSpinBox(const QString& initialValue="0", const QString& min="0", const QString& max="9999", const QString& s=QString::null);
     void setLineEdit();
-    void setLengthEditor(const QString& s=QString::null);
-    void setDoubleLengthEditor(const QString& s=QString::null);
-    void setDoublePercentageEditor(const QString& s=QString::null);
-    void setDoubleComboBoxEditor();
-    void setPercentageEditor(const QString& s=QString::null);
-    void setUriEditor();
-    void setFrequencyEditor(const QString& s=QString::null);
-    void setTimeEditor(const QString& s=QString::null);
-    void setAngleEditor(const QString& s=QString::null);
-    void setColorRequester(const QString& s=QString::null);
-    void setPredefinedColorListEditor(const QString& s=QString::null);
+    void setPredefinedColorListEditor();
     void reset();
     void addButton();
     QComboBox* ComboBox() const { return m_cb; }
-    doubleComboBoxEditor* DoubleComboBoxEditor() const { return m_dcbe; }
-    URIEditor* UriEditor() const { return m_ue; }
 
   public slots:
     void Show();
diff --recursive -uP /usr/CVS_KDE/kdewebdev/quanta/components/csseditor/qmyhighlighter.cpp /home/simone/Desktop/kdewebdev/quanta/components/csseditor/qmyhighlighter.cpp
--- /usr/CVS_KDE/kdewebdev/quanta/components/csseditor/qmyhighlighter.cpp	2004-09-14 23:12:54.000000000 +0200
+++ /home/simone/Desktop/kdewebdev/quanta/components/csseditor/qmyhighlighter.cpp	2004-06-23 17:33:23.000000000 +0200
@@ -26,7 +26,6 @@
 /*****************************************************************************/
 int QMyHighlighter::highlightParagraph( const QString & text, int endStateOfLastPara )
 {
-  Q_UNUSED(endStateOfLastPara);
   //QRegExp pattern("\\s*\\{([\\w\\s\\d:;-\"]*)\\}\\s*");
   QRegExp pattern("([#:\\.\\w]*)\\s*\\{");
   int pos=pattern.search(text,0);
diff --recursive -uP /usr/CVS_KDE/kdewebdev/quanta/components/csseditor/shorthandformer.cpp /home/simone/Desktop/kdewebdev/quanta/components/csseditor/shorthandformer.cpp
--- /usr/CVS_KDE/kdewebdev/quanta/components/csseditor/shorthandformer.cpp	2004-09-14 23:12:55.000000000 +0200
+++ /home/simone/Desktop/kdewebdev/quanta/components/csseditor/shorthandformer.cpp	2004-08-10 11:45:26.000000000 +0200
@@ -23,18 +23,18 @@
 #include <kdebug.h>
 #include "csseditor_globals.h" 
 
- QRegExp globalPercentagePattern("\\d%"),
-                          globalLengthPattern("\\dex|em|px|cm|pt|pc|in|mm"),
-                          globalColorPattern("#[\\w\\d]*"),
-                          globalNumberPattern("\\d*");
-                
+QRegExp globalPercentagePattern("\\d%"),
+                globalLengthPattern("\\d(ex|em|px|cm|pt|pc|in|mm)"),
+                globalColorPattern("#[\\w\\d]*"),
+                globalNumberPattern("\\d*");
+                                          
 static const QString borderStyleValueString("none,hidden,dotted,dashed,solid,double,groove,ridge,inset,outset,inherit");               
 static const QString widthValueString("thin,medium,thick,inherit");
 static const QString listTypeValueString("disc,circle,square,decimal,decimal-leading-zero,lower-roman,upper-roman,lower-greek,lower-alpha,lower-latin,upper-alpha,upper-latin,hebrew,armenian,georgian,cjk-ideographic,hiragana,katakana,hiragana-iroha,katakana-iroha,none,inherit");
 static const QString fontSizeValueString("smaller,larger,xx-large,x-large,large,medium,small,x-small,xx-small,inherit");
 static const QString fontWeightValueString("900,800,700,600,500,400,300,200,100,lighter,bolder,normal,bold,inherit");
-static const QString fontStyleValueString("normal,small-caps,inherit");       
-static const QString fontVariantValueString("oblique,italic,normal,inherit");      
+static const QString fontVariantValueString("normal,small-caps,inherit");       
+static const QString fontStyleValueString("oblique,italic,normal,inherit");      
 static const QString backgroundRepeatValueString("repeat,repeat-x,repeat-y,no-repeat,inherit");
              
 
@@ -47,9 +47,10 @@
 static const QStringList fontVariantValueList = QStringList::split(",",fontVariantValueString);
 static const QStringList backgroundRepeatValueList = QStringList::split(",",backgroundRepeatValueString);
 
-ShorthandFormer::ShorthandFormer(){}
+
 
 ShorthandFormer::ShorthandFormer( QMap<QString,QString> m){
+
   m_properties = m;
   if(m_properties.contains("cue-after")){
     cue_after= m_properties["cue-after"];
@@ -217,12 +218,7 @@
   }
 }
 
-ShorthandFormer::~ShorthandFormer()
-{
-}
-
-QString ShorthandFormer::compress()
-{                             
+QString ShorthandFormer::compress(){                             
   QString props;   
   
   props += compressCueProp(); 
@@ -237,9 +233,10 @@
                                        
   QMap<QString,QString>::Iterator it;             
   for ( it = m_properties.begin(); it != m_properties.end(); ++it )           
-      props += ( it.key() + " : " + it.data().stripWhiteSpace() + "; " );
+      props +=  it.key() + " : " + it.data().stripWhiteSpace() + "; " ;
     
   props.truncate(props.length()-1);//the last white space creates some problem: better remove it
+  //props.chop(1);
   return props;  
 }
 
@@ -251,15 +248,15 @@
        allWidthSidesSet = false;    
    
   if(!border_left_color.isEmpty())
-     if( ( border_left_color == border_top_color ) && ( border_top_color == border_right_color ) && ( border_right_color == border_bottom_color ) )
+     if( ( border_left_color == border_top_color ) and ( border_top_color == border_right_color ) and ( border_right_color == border_bottom_color ) )
          allColorSidesSet = true;
           
    if(!border_left_style.isEmpty())  
-     if( ( border_left_style == border_top_style ) && ( border_top_style == border_right_style ) && ( border_right_style == border_bottom_style ) )
+     if( ( border_left_style == border_top_style ) and ( border_top_style == border_right_style ) and ( border_right_style == border_bottom_style ) )
        allStyleSidesSet = true;        
              
    if(!border_left_width.isEmpty())  
-     if( ( border_left_width == border_top_width ) && ( border_top_width == border_right_width ) && ( border_right_width == border_bottom_width ) )
+     if( ( border_left_width == border_top_width ) and ( border_top_width == border_right_width ) and ( border_right_width == border_bottom_width ) )
        allWidthSidesSet = true;          
                    
    if ( allColorSidesSet ) {
@@ -321,13 +318,13 @@
 //because the default value of color property is browser dependant, this method doesn't compress the color value
   QString props;
   if( !border_top_color.isEmpty() )
-    props += ("border-top-color : " + border_top_color +"; ");
+    props += "border-top-color : " + border_top_color +"; ";
   if( !border_right_color.isEmpty() )
-    props += ("border-right-color : " + border_right_color +"; ");
+    props += "border-right-color : " + border_right_color +"; ";
   if( !border_bottom_color.isEmpty() )
-    props += ("border-bottom-color : " + border_bottom_color +"; ");
+    props += "border-bottom-color : " + border_bottom_color +"; ";
   if( !border_left_color.isEmpty() )
-    props += ("border-left-color : " + border_left_color +"; ");      
+    props += "border-left-color : " + border_left_color +"; ";      
   return props;
 }
 
@@ -336,21 +333,21 @@
                props;
   //bool appendLineHeight = false;  
   
-  if( font_style.isEmpty() && font_variant.isEmpty() && font_weight.isEmpty() && font_size.isEmpty() && font_family.isEmpty() ) { 
+  if( font_style.isEmpty() and font_variant.isEmpty() and font_weight.isEmpty() and font_size.isEmpty() and font_family.isEmpty() ) { 
     if( !line_height.isEmpty() )
-      props += ("line-height : " + line_height + "; ");
+      props += "line-height : " + line_height + "; ";
   }
   else {
      if( !font_style.isEmpty() ) 
-       fontProp += ( " " + font_style);  
+       fontProp +=  " " + font_style;  
      if( !font_variant.isEmpty() ) 
-       fontProp += ( " " + font_variant);
+       fontProp +=  " " + font_variant;
      if( !font_weight.isEmpty() )
-       fontProp += ( " " + font_weight); 
+       fontProp +=  " " + font_weight; 
      if( !font_size.isEmpty() ){
-       fontProp += ( " " + font_size);
+       fontProp +=  " " + font_size;
        if( !line_height.isEmpty() ) 
-         fontProp += ( "/" + line_height.stripWhiteSpace() );      
+         fontProp +=  "/" + line_height.stripWhiteSpace() ;      
      } 
      else {
        fontProp += ( " medium");
@@ -361,7 +358,8 @@
      }
         
      if( !font_family.isEmpty() ) 
-       fontProp += ( " " + font_family);            
+       fontProp += ( " " + font_family);  
+     else  fontProp += " serif";             
    if( !fontProp.isEmpty() )
     props += ( "font :" + fontProp + "; ");
   /* if(appendLineHeight) 
@@ -441,10 +439,10 @@
   if( right.isEmpty() ) right  = defValue;  
   
   
-  if( top == defValue && bottom == defValue && right == defValue && left == defValue)
+  if( top == defValue and bottom == defValue and right == defValue and left == defValue)
   return QString::null;
     
-  if( top == bottom && bottom == right && right == left )
+  if( top == bottom and bottom == right and right == left )
   return ( prop +" : " + top + "; ");
   
   if( right == left ) {
@@ -506,7 +504,7 @@
 
 QMap<QString,QString>  ShorthandFormer::expandBackgroundProp(QStringList l){
   QMap<QString,QString> expandedProps;       
-  if(l.count()==1 && l[0] == "inherit"){ // it works also as protection against wrong single value inserted
+  if(l.count()==1 and l[0] == "inherit"){ // it works also as protection against wrong single value inserted
     expandedProps["background-color"] = l[0];
     expandedProps["background-image"] = l[0];
     expandedProps["background-repeat"] = l[0];
@@ -519,7 +517,7 @@
 
     while (  it != l.end() ) {  
       QString temp((*it).stripWhiteSpace());
-      if( (*it).contains("url(") || temp == "none" || temp == "inherit" ){
+      if( (*it).contains("url(") or temp == "none" or temp == "inherit" ){
         expandedProps["background-image"] = (*it);
       }
       else
@@ -527,15 +525,15 @@
         expandedProps["background-repeat"] = (*it);
       }
       else
-      if( temp == "scroll" || temp == "fixed" || temp == "inherit"){
+      if( temp == "scroll" or temp == "fixed" or temp == "inherit"){
         expandedProps["background-attachment"] = (*it);
       }
       else
-      if( (*it).contains("rgb(") || (*it).contains(globalColorPattern) || CSSEditorGlobals::HTMLColors.contains((*it))!=0 || temp == "transparent" || temp == "inherit" ){
+      if( (*it).contains("rgb(") or (*it).contains(globalColorPattern) or CSSEditorGlobals::HTMLColors.contains((*it))!=0 or temp == "transparent" or temp == "inherit" ){
         expandedProps["background-color"] = (*it);
       } 
       else
-      if( temp == "top" || temp == "center" || temp == "bottom" || temp == "left" || temp == "right" || (*it).contains(globalPercentagePattern) || (*it).contains(globalLengthPattern) || temp == "inherit"){
+      if( temp == "top" or temp == "center" or temp == "bottom" or temp == "left" or temp == "right" or (*it).contains(globalPercentagePattern) or (*it).contains(globalLengthPattern) or temp == "inherit"){
         if( expandedProps.contains("background-position") )
           expandedProps["background-position"] = ( expandedProps["background-position"] + " " + (*it) );
         else    
@@ -592,7 +590,7 @@
    fontPseudoSHFormValues.append("message-box");  
    fontPseudoSHFormValues.append("small-caption");  
    fontPseudoSHFormValues.append("status-bar");
-  if( l.count()==1 && fontPseudoSHFormValues.contains(l[0]) != 0) {
+  if( l.count()==1 and fontPseudoSHFormValues.contains(l[0]) != 0) {
     expandedProps["font"] = l[0];
     return expandedProps; 
   }
@@ -606,10 +604,10 @@
           else
             if( fontWeightValueList.contains(temp)!=0) expandedProps["font-weight"] = (*it);
             else
-               if( (fontSizeValueList.contains(temp)!=0 || (*it).contains(globalPercentagePattern)!=0  || (*it).contains(globalLengthPattern)!=0) && expandedProps["font-size"].isEmpty() )
+               if( (fontSizeValueList.contains(temp)!=0 or (*it).contains(globalPercentagePattern)!=0  or (*it).contains(globalLengthPattern)!=0) and expandedProps["font-size"].isEmpty() )
                  expandedProps["font-size"] = (*it);    
                else
-                 if( (*it).contains(percentagePattern)!=0 || (*it).contains(numberPattern)!=0 || (*it).contains(lengthPattern)!=0 || temp == "/normal" || temp == "/inherit" ) 
+                 if( (*it).contains(percentagePattern)!=0 or (*it).contains(numberPattern)!=0 or (*it).contains(lengthPattern)!=0 or temp == "/normal" or temp == "/inherit" ) 
                    expandedProps["line-height"] = ((*it).remove('/'));
                  else expandedProps["font-family"] = (*it);
         ++it;  
@@ -620,37 +618,34 @@
 
 QMap<QString,QString> ShorthandFormer::expandListstyleProp( QStringList l){
   QMap<QString,QString> expandedProps;
-  if(l.count() == 1 ){
-    if(l[0] == "inherit"){
+  if( (l.count() == 1) and (l[0] == "inherit")){
       expandedProps["list-style-image"] ="inherit";
       expandedProps["list-style-type"] ="inherit";
       expandedProps["list-style-position"] ="inherit";
       return expandedProps;
-    }
-    if(l[0] == "none"){
-      expandedProps["list-style-image"] ="none";
-      expandedProps["list-style-type"] ="none";
-      return expandedProps;
-    }    
   }
   
+  if( (l.count() == 1) and (l[0] == "none")){  
+    expandedProps["list-style-image"] ="none";
+    expandedProps["list-style-type"] ="none";
+    return expandedProps; 
+  }
+    
+  
   QStringList::Iterator it = l.begin(); 
-    while (  it != l.end() ) { 
+  while (  it != l.end() ) { 
       QString temp((*it).stripWhiteSpace());
-      if( borderStyleValueList.contains(temp)!=0) {
+      if( listTypeValueList.contains(temp)!=0) {
         expandedProps["list-style-type"] = (*it) ; 
-        l.remove((*it));
       }
       else
-        if( temp == "inside" || temp == "outside" || temp == "inherit") {
+        if( temp == "inside" or temp == "outside" or temp == "inherit") {
           expandedProps["list-style-position"] = (*it); 
-          l.remove((*it));
         }    
         else
-          if( (*it).contains("url(") || temp == "none" || temp == "inherit" ) {
+          if( (*it).contains("url(") or temp == "none" or temp == "inherit" ) 
             expandedProps["list-style-image"] = (*it);
-            l.remove((*it));
-          }
+          
       ++it;  
     }  
   return expandedProps;
@@ -663,10 +658,10 @@
       QString temp((*it).stripWhiteSpace());
       if( borderStyleValueList.contains(temp)!=0 ) expandedProps["outline-style"] = (*it);            
       else
-      if(  (*it).contains(globalColorPattern) || CSSEditorGlobals::HTMLColors.contains((*it))!=0 || temp == "invert" || temp == "inherit")
+      if(  (*it).contains(globalColorPattern) or CSSEditorGlobals::HTMLColors.contains((*it))!=0 or temp == "invert" or temp == "inherit")
           expandedProps["outline-color"] = (*it) ;           
       else
-      if( (*it).contains(globalLengthPattern) || widthValueList.contains(temp)!=0)
+      if( (*it).contains(globalLengthPattern) or widthValueList.contains(temp)!=0)
         expandedProps["outline-width"] = (*it);      
       ++it;  
     }  
@@ -681,10 +676,10 @@
        QString temp((*it).stripWhiteSpace());
       if( borderStyleValueList.contains(temp)!=0 ) expandedProps[subPropName + "-style"] = (*it);           
       else
-      if(  (*it).contains(globalColorPattern) || CSSEditorGlobals::HTMLColors.contains((*it))!=0 || temp == "transparent" || temp == "inherit")
+      if(  (*it).contains(globalColorPattern) or CSSEditorGlobals::HTMLColors.contains((*it))!=0 or temp == "transparent" or temp == "inherit")
           expandedProps[subPropName + "-color"] = (*it) ;     
       else
-      if( (*it).contains(globalLengthPattern) || widthValueList.contains(temp)!=0)
+      if( (*it).contains(globalLengthPattern) or widthValueList.contains(temp)!=0)
         expandedProps[subPropName + "-width"] = (*it);     
       ++it;  
     }  
@@ -703,14 +698,14 @@
         expandedProps["border-bottom-style"] = (*it);
       }       
       else
-      if(  (*it).contains(globalColorPattern) || CSSEditorGlobals::HTMLColors.contains((*it))!=0 || temp == "transparent" || temp == "inherit"){
+      if(  (*it).contains(globalColorPattern) or CSSEditorGlobals::HTMLColors.contains((*it))!=0 or temp == "transparent" or temp == "inherit"){
         expandedProps["border-top-color"] = (*it);
         expandedProps["border-left-color"] = (*it);
         expandedProps["border-right-color"] = (*it);
         expandedProps["border-bottom-color"] = (*it);
       }      
       else
-      if( (*it).contains(globalLengthPattern) || widthValueList.contains(temp)!=0){
+      if( (*it).contains(globalLengthPattern) or widthValueList.contains(temp)!=0){
         expandedProps["border-top-width"] = (*it);
         expandedProps["border-left-width"] = (*it);
         expandedProps["border-right-width"] = (*it);
diff --recursive -uP /usr/CVS_KDE/kdewebdev/quanta/components/csseditor/shorthandformer.h /home/simone/Desktop/kdewebdev/quanta/components/csseditor/shorthandformer.h
--- /usr/CVS_KDE/kdewebdev/quanta/components/csseditor/shorthandformer.h	2004-09-14 23:12:55.000000000 +0200
+++ /home/simone/Desktop/kdewebdev/quanta/components/csseditor/shorthandformer.h	2004-07-21 15:23:18.000000000 +0200
@@ -29,9 +29,9 @@
 
 class ShorthandFormer{
 public:
-    ShorthandFormer();
+    ShorthandFormer(){}
     ShorthandFormer( QMap<QString,QString> m );
-    ~ShorthandFormer();
+    ~ShorthandFormer(){}
     QString compress();
     QMap<QString,QString> expand(QString propertyName, QString propertyValue);
     static QStringList SHFormList();
diff --recursive -uP /usr/CVS_KDE/kdewebdev/quanta/components/csseditor/specialsb.cpp /home/simone/Desktop/kdewebdev/quanta/components/csseditor/specialsb.cpp
--- /usr/CVS_KDE/kdewebdev/quanta/components/csseditor/specialsb.cpp	2004-09-14 23:12:55.000000000 +0200
+++ /home/simone/Desktop/kdewebdev/quanta/components/csseditor/specialsb.cpp	2004-08-10 10:28:24.000000000 +0200
@@ -16,9 +16,10 @@
  ***************************************************************************/
 
 #include "specialsb.h"
+#include "propertysetter.h"
 #include "csseditor_globals.h"
 
-specialSB::specialSB(QWidget *parent, const char *name ) : QHBox(parent,name) {
+specialSB::specialSB(QWidget *parent, const char *name ) : miniEditor(parent,name) {
   m_sb=new mySpinBox(this);
   m_cb=new QComboBox(this);
   connect(m_cb, SIGNAL(activated ( const QString & )), this, SLOT(cbValueSlot(const QString&)));
@@ -30,6 +31,11 @@
   delete m_sb;
 }
 
+void specialSB::connectToPropertySetter(propertySetter* p){
+  connect(this, SIGNAL(valueChanged(const QString&)), p,SIGNAL(valueChanged(const QString&)));
+}
+ 
+
 void specialSB::cbValueSlot(const QString& s){
   emit valueChanged( m_sb->text() +s );
 }
@@ -38,9 +44,18 @@
   emit valueChanged( s + m_cb->currentText());
 }
 
-void specialSB::setInitialValue(QString sbValue, QString cbValue){
-  m_sb->setValue(sbValue.toInt());
-  m_cb->setCurrentText(cbValue);
+void specialSB::setInitialValue(QString s){
+
+  QRegExp pattern("\\d("+ cbValueList().join("|")+")");
+  
+  if(s.contains(pattern)) {
+    QString temp1(s.stripWhiteSpace()),
+                 temp2(s.stripWhiteSpace());
+                 
+    m_sb->setValue(temp1.remove(QRegExp("\\D")).toInt());
+    m_cb->setCurrentText(temp2.remove(QRegExp("\\d")));              
+  }
+  else return;
 }
 
 QStringList specialSB::cbValueList(){
diff --recursive -uP /usr/CVS_KDE/kdewebdev/quanta/components/csseditor/specialsb.h /home/simone/Desktop/kdewebdev/quanta/components/csseditor/specialsb.h
--- /usr/CVS_KDE/kdewebdev/quanta/components/csseditor/specialsb.h	2004-09-14 23:12:55.000000000 +0200
+++ /home/simone/Desktop/kdewebdev/quanta/components/csseditor/specialsb.h	2004-08-10 10:26:35.000000000 +0200
@@ -18,7 +18,7 @@
 #ifndef SPECIALSB_H
 #define SPECIALSB_H
 
-#include <qhbox.h>
+#include "minieditor.h"
 #include <qcombobox.h>
 class mySpinBox;
 
@@ -26,7 +26,7 @@
   *@author gulmini luciano
   */
  
-class specialSB : public QHBox {
+class specialSB : public miniEditor {
     Q_OBJECT
   protected:
     QComboBox *m_cb;
@@ -36,8 +36,9 @@
            specialSB(QWidget *parent=0, const char *name=0);
            ~specialSB();
      void insertItem(QString s){ m_cb->insertItem(s); }
-     void setInitialValue(QString sbValue, QString cbValue);
+     void setInitialValue(QString s);
      QStringList cbValueList();
+      virtual void connectToPropertySetter(propertySetter* p);
      
    public slots:
      void cbValueSlot(const QString&);
diff --recursive -uP /usr/CVS_KDE/kdewebdev/quanta/components/csseditor/styleeditor.cpp /home/simone/Desktop/kdewebdev/quanta/components/csseditor/styleeditor.cpp
--- /usr/CVS_KDE/kdewebdev/quanta/components/csseditor/styleeditor.cpp	2004-09-14 23:12:55.000000000 +0200
+++ /home/simone/Desktop/kdewebdev/quanta/components/csseditor/styleeditor.cpp	2004-08-09 20:18:15.000000000 +0200
@@ -1,7 +1,7 @@
 /***************************************************************************
                            styleeditor  -  implementation
     begin              : Wed Apr 7 2004
-    copyright          : (C) 2004 by Luciano Gulmini <e.gulmini@tiscali.it>
+    copyright          : (C) 2004 by Luciano Gulmini <gulmini.luciano@student.unife.it>
  ***************************************************************************/
 
 /***************************************************************************
@@ -17,6 +17,7 @@
 #include <qtooltip.h>
 #include <qiconset.h>
 #include <qlabel.h>
+#include <qfileinfo.h>
 
 //kde includes
 #include <kdialog.h>
@@ -36,6 +37,7 @@
 #include "styleeditor.h"
 #include "viewmanager.h"
 #include "csseditor.h"
+#include "quanta.h"
 
 StyleEditor::StyleEditor(QWidget *parent, const char* name) : TLPEditor(parent,name){
   connect(m_pb, SIGNAL(clicked()), this, SLOT(openCSSEditor()));
@@ -75,7 +77,8 @@
 
   if (styleNode && styleNode->tag->type == Tag::XmlTag) {
     CSSEditor *dlg = new CSSEditor(this);
-    dlg->setForInitialPreview(fullDocument);
+    QFileInfo fi(quantaApp->currentURL());
+    dlg->setFileToPreview(quantaApp->projectBaseURL().path() +  fi.baseName(),false);
 
     styleNode->tag->beginPos(bLine, bCol);
     styleNode->tag->endPos(eLine, eCol);
diff --recursive -uP /usr/CVS_KDE/kdewebdev/quanta/components/csseditor/styleeditor.h /home/simone/Desktop/kdewebdev/quanta/components/csseditor/styleeditor.h
--- /usr/CVS_KDE/kdewebdev/quanta/components/csseditor/styleeditor.h	2004-09-14 23:12:55.000000000 +0200
+++ /home/simone/Desktop/kdewebdev/quanta/components/csseditor/styleeditor.h	2004-08-09 20:18:17.000000000 +0200
@@ -1,7 +1,7 @@
 /***************************************************************************
                            styleeditor  -  description
     begin              : Wed Apr 7 2004
-    copyright          : (C) 2004 by Luciano Gulmini <e.gulmini@tiscali.it>
+    copyright          : (C) 2004 by Luciano Gulmini <gulmini.luciano@student.unife.it>
  ***************************************************************************/
 
 /***************************************************************************
@@ -22,7 +22,7 @@
 //app includes
 
 //forward declarations
-
+class propertySetter;
 class StyleEditor : public TLPEditor{
   Q_OBJECT
   private:
@@ -34,6 +34,8 @@
 
 public slots:
     void openCSSEditor();
+    virtual void connectToPropertySetter(propertySetter* p){}
+    virtual void setInitialValue(const QString& s){}
 };
 
 
diff --recursive -uP /usr/CVS_KDE/kdewebdev/quanta/components/csseditor/stylesheetparser.cpp /home/simone/Desktop/kdewebdev/quanta/components/csseditor/stylesheetparser.cpp
--- /usr/CVS_KDE/kdewebdev/quanta/components/csseditor/stylesheetparser.cpp	1970-01-01 01:00:00.000000000 +0100
+++ /home/simone/Desktop/kdewebdev/quanta/components/csseditor/stylesheetparser.cpp	2004-09-19 20:55:59.000000000 +0200
@@ -0,0 +1,202 @@
+/***************************************************************************
+                          stylesheetparser.cpp  -  description
+                             -------------------
+    begin                : gio ago 19 2004
+    copyright            : (C) 2004 by gulmini luciano
+    email                : gulmini.luciano@student.unife.it
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#include "stylesheetparser.h"
+#include <klocale.h>
+#include <kdebug.h>
+
+static const QString msg1(i18n("hasn't been closed")),
+                     msg2(i18n("needs an opening parenthesis "));
+
+stylesheetParser::stylesheetParser(const QString& s){ 
+  m_styleSheet = s;
+  m_styleSheet=m_styleSheet.right(m_styleSheet.length()-whiteSpaces(0));
+  m_stopProcessing = false;
+  m_orderNumber = 0; 
+}
+    
+int stylesheetParser::whiteSpaces(int d){
+  int ws=0;
+  for( unsigned int i=d;i<m_styleSheet.length();i++){
+    QString temp;
+    if(m_styleSheet[i] == ' ' or m_styleSheet[i] == '\n'  or m_styleSheet[i] == '\t' ) 
+      ws++;
+    else break; 
+  }
+  return ws;
+}
+
+void stylesheetParser::parse(){
+  if(!m_stopProcessing){
+    if(!m_styleSheet.isEmpty()){
+        if(m_styleSheet.startsWith("/*")) 
+          parseComment();
+        else if(m_styleSheet.startsWith("@page")) 
+                  parseAtRules1();
+                else if(m_styleSheet.startsWith("@media")) 
+                          parseAtRules1();
+                        else if(m_styleSheet.startsWith("@import")) 
+                                  parseAtRules2();
+                                else if(m_styleSheet.startsWith("@charset")) 
+                                          parseAtRules2();
+                                        else parseSelector();
+    }    
+    else return;
+  }  
+}
+
+void stylesheetParser::parseComment(){ 
+  bool stopProcessingComment=false;
+  unsigned int k;
+  for(k=2;k<m_styleSheet.length()-1;k++){
+    QString temp;
+    temp.append(m_styleSheet[k]).append(m_styleSheet[k+1]);
+    if(temp=="*/")  {
+      k+=2;
+      stopProcessingComment=true;
+      break;
+    }    
+  }
+  
+  if(stopProcessingComment){
+    int ws=whiteSpaces(k);
+    QPair<QString,unsigned int> tmp(m_styleSheet.left(k+ws),++m_orderNumber);
+    m_stylesheetStructure["/*"+QString::number(m_orderNumber,10)]=tmp;
+    m_styleSheet=m_styleSheet.right(m_styleSheet.length()-k-ws);
+    parse(); 
+  }
+  
+   else {
+      m_stopProcessing = true;
+      emit errorOccurred(i18n("The comment") + " :\n" +m_styleSheet.mid(0,20) + "...\n "+ msg1);      
+      return;
+    }
+}
+
+unsigned int stylesheetParser::numberOfParenthesisInAParenthesisBlock(parenthesisKind p, const QString& b){
+  switch(p){
+    case opened: return b.contains("{");
+    case closed: return b.contains("}");
+    default:return 0;
+  }
+}
+
+void stylesheetParser::parseSelector(){
+  int closingParenthesisPos = m_styleSheet.find("}");
+   if(closingParenthesisPos==-1) {
+    m_stopProcessing = true;
+    emit errorOccurred(i18n("The selector") + " :\n" +m_styleSheet.mid(0,20) + "...\n "+ msg1);      
+    return;
+  }
+    
+   QString temp(m_styleSheet.left(closingParenthesisPos+1));    
+  
+  if(numberOfParenthesisInAParenthesisBlock(closed,temp) < numberOfParenthesisInAParenthesisBlock(opened,temp)){
+    m_stopProcessing = true;
+    emit errorOccurred(i18n("The selector") + " :\n" +m_styleSheet.mid(0,20) + "...\n "+ msg1);      
+    return;
+  }  
+  
+  if(numberOfParenthesisInAParenthesisBlock(closed,temp) > numberOfParenthesisInAParenthesisBlock(opened,temp)){
+    m_stopProcessing = true;
+    emit errorOccurred(i18n("The selector") + " :\n" +m_styleSheet.mid(0,20) + "...\n "+ msg2);      
+    return;
+  }    
+ 
+   int closingParentheses = 1,
+        openingParentheses = 0;
+  while(true){ 
+    openingParentheses = m_styleSheet.left(closingParenthesisPos+1).contains("{");
+        
+    if(openingParentheses==closingParentheses){
+      QString selectorName=m_styleSheet.left(m_styleSheet.find("{")).stripWhiteSpace(),
+                   selectorValue=m_styleSheet.mid(m_styleSheet.find("{")+1, closingParenthesisPos - m_styleSheet.find("{") -1);    
+        
+      selectorName.remove("\n").remove("\t");
+      selectorValue.remove("\n").remove("\t");
+      QPair<QString,unsigned int> tmp(selectorValue,++m_orderNumber);
+      m_stylesheetStructure[selectorName]=tmp; 
+      break;
+    } 
+    else {
+      closingParenthesisPos = m_styleSheet.find("}",closingParenthesisPos+1);
+      closingParentheses++;
+    } 
+  }
+
+  int ws=whiteSpaces(closingParenthesisPos+1);
+  m_styleSheet=m_styleSheet.right(m_styleSheet.length()-closingParenthesisPos-1-ws);
+  parse(); 
+}
+
+void stylesheetParser::parseAtRules1(){
+//TODO this needs to be fixed : in case the at rule is not properly closed the parser hangs
+  if(m_styleSheet.find("{") == -1) {
+    m_stopProcessing = true;
+    emit errorOccurred(m_styleSheet.mid(0,20) + "...\n " + msg2);      
+    return;
+  }
+
+  int closingParenthesisPos = m_styleSheet.find("}"),
+       closingParentheses = 0;
+      
+  if(closingParenthesisPos==-1) return;
+  else closingParentheses = 1;     
+
+  int openingParentheses=0;
+  while(true){
+   openingParentheses = m_styleSheet.left(closingParenthesisPos+1).contains("{");
+
+    if(openingParentheses==closingParentheses) 
+      break;   
+    else {
+      closingParenthesisPos = m_styleSheet.find("}",closingParenthesisPos+1);
+      if( closingParenthesisPos!= -1 )
+        closingParentheses++;
+      else {
+        m_stopProcessing = true;
+        emit errorOccurred(m_styleSheet.mid(0,20) + "...\n " + msg1);      
+        return;
+      }  
+    } 
+  }
+
+  int ws=whiteSpaces(closingParenthesisPos+1);
+  QPair<QString,unsigned int> tmp(m_styleSheet.left(closingParenthesisPos+1+ws),++m_orderNumber);
+  m_stylesheetStructure["@rule"+QString::number(m_orderNumber,10)]=tmp;
+  m_styleSheet=m_styleSheet.right(m_styleSheet.length()-closingParenthesisPos-1-ws);
+  parse(); 
+}
+
+void stylesheetParser::parseAtRules2(){
+//TODO this needs to be fixed : in case the at rule is not properly closed the parser hangs
+  int semicolonPos = m_styleSheet.find(";");
+      
+  if(semicolonPos==-1) {
+    m_stopProcessing = true;
+    emit errorOccurred(m_styleSheet.mid(0,20) + "...\n " + msg1);      
+    return;
+  }
+ 
+  int ws=whiteSpaces(semicolonPos+1);
+  QPair<QString,unsigned int> tmp(m_styleSheet.left(semicolonPos+1+ws),++m_orderNumber);
+  m_stylesheetStructure["@rule"+QString::number(m_orderNumber,10)]=tmp;
+  m_styleSheet=m_styleSheet.right(m_styleSheet.length()-semicolonPos-1-ws);
+  parse(); 
+}
+
+#include "stylesheetparser.moc"
diff --recursive -uP /usr/CVS_KDE/kdewebdev/quanta/components/csseditor/stylesheetparser.h /home/simone/Desktop/kdewebdev/quanta/components/csseditor/stylesheetparser.h
--- /usr/CVS_KDE/kdewebdev/quanta/components/csseditor/stylesheetparser.h	1970-01-01 01:00:00.000000000 +0100
+++ /home/simone/Desktop/kdewebdev/quanta/components/csseditor/stylesheetparser.h	2004-09-19 20:55:59.000000000 +0200
@@ -0,0 +1,58 @@
+/***************************************************************************
+                          stylesheetparser.h  -  description
+                             -------------------
+    begin                : gio ago 19 2004
+    copyright            : (C) 2004 by gulmini luciano
+    email                : gulmini.luciano@student.unife.it
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#ifndef STYLESHEETPARSER_H
+#define STYLESHEETPARSER_H
+
+#include <qmap.h>
+#include <qpair.h>
+#include <qobject.h>
+
+/**
+  *@author gulmini luciano
+  */
+
+class stylesheetParser : public QObject{
+  Q_OBJECT
+  private:
+    
+    enum parenthesisKind { opened, closed };
+    QString m_styleSheet;
+    bool m_stopProcessing;
+    unsigned int m_orderNumber;
+    QMap<QString, QPair<QString,unsigned int> > m_stylesheetStructure; 
+    void parseComment();  
+    void parseSelector();
+    void parseAtRules1();
+    void parseAtRules2();
+    int whiteSpaces(int);
+    unsigned int numberOfParenthesisInAParenthesisBlock(parenthesisKind p, const QString& b);
+    
+  public:
+    stylesheetParser(const QString& s);
+    ~stylesheetParser(){}
+    void parse();
+
+    QMap<QString, QPair<QString,unsigned int> > stylesheetStructure() { return m_stylesheetStructure; }
+    unsigned int orderNumber() const {return m_orderNumber; }
+    
+  signals:
+    void errorOccurred(const QString&);  
+};  
+  
+#endif
+ 
diff --recursive -uP /usr/CVS_KDE/kdewebdev/quanta/components/csseditor/tlpeditors.cpp /home/simone/Desktop/kdewebdev/quanta/components/csseditor/tlpeditors.cpp
--- /usr/CVS_KDE/kdewebdev/quanta/components/csseditor/tlpeditors.cpp	2004-09-14 23:12:55.000000000 +0200
+++ /home/simone/Desktop/kdewebdev/quanta/components/csseditor/tlpeditors.cpp	2004-08-17 12:10:55.000000000 +0200
@@ -19,6 +19,7 @@
 #include <qcombobox.h>
 #include <qlabel.h>
 #include <qtooltip.h>
+#include <qwhatsthis.h>
 
 #include <kpushbutton.h>
 #include <kurl.h>
@@ -34,8 +35,8 @@
 #include "tlpeditors.h"
 #include "fontfamilychooser.h"
 #include "project.h"
-
-TLPEditor::TLPEditor(QWidget *parent, const char* name) : QHBox(parent,name){
+    
+TLPEditor::TLPEditor(QWidget *parent, const char* name) : miniEditor(parent,name){
   m_label = new QLabel(this);
   m_le = new QLineEdit(this);
   m_pb = new KPushButton(this);
@@ -63,80 +64,113 @@
   QToolTip::add(m_pb, s);
 }
 
+void TLPEditor::setWhatsThis(QString s){
+  QWhatsThis::add(m_le,s);
+}
+
 URIEditor::URIEditor(QWidget *parent, const char* name) : TLPEditor(parent,name){
-  m_Mode = Single;
-  setLabelText(i18n( " Uri  :" ));
+  QString whatsthis =i18n("WIth this line edit you can insert the URI of the resource you want to reach");  
+  setWhatsThis(whatsthis);
+  setLabelText(" Uri  :");
   setButtonIcon("fileopen");
   setToolTip(i18n("Open the URI selector"));
+    
+  connect(m_pb, SIGNAL(clicked()), this, SLOT(openFileDialog()));
+}
 
+void URIEditor::connectToPropertySetter(propertySetter* p){
+  connect(this,SIGNAL(valueChanged(const QString&)), p ,SIGNAL(valueChanged(const QString&))); 
+}
+
+void URIEditor::setMode(const mode& m) { 
+  m_Mode = m ; 
   if( m_Mode == Single )
-    connect(m_le, SIGNAL(textChanged ( const QString & )), this, SLOT(URI(const QString&)));
-  connect(m_pb, SIGNAL(clicked()), this, SLOT(openFileDialog()));
+    connect(m_le, SIGNAL(textChanged ( const QString & )), this, SLOT(selectedURI(const QString&)));
+  else{
+    connect(m_le, SIGNAL(textChanged ( const QString & )), this, SLOT(selectedURIs(const QStringList&))); 
+  }  
 }
 
-void URIEditor::URI(const QString & s){
+void URIEditor::selectedURI(const QString & s){
    KURL u;
    u.setPath(s);
    emit valueChanged("url(\'" + QExtFileInfo::toRelative(u, quantaApp->projectBaseURL()).path() + "\')");
- }
+}
 
+void URIEditor::selectedURIs(const QStringList& s){
+  KURL u;
+  QStringList selectedFiles = s,
+                     selectedFilesWithURLFormat;
+  for ( QStringList::Iterator it = selectedFiles.begin(); it != selectedFiles.end(); ++it ){      
+    u.setPath(*it);   
+    selectedFilesWithURLFormat.append( "url(\'" + QExtFileInfo::toRelative(u, quantaApp->projectBaseURL()).path() + "\')");
+  }
+  emit valueChanged(selectedFilesWithURLFormat.join(","));
+}
+ 
 void URIEditor::openFileDialog(){
-
-  KFileDialog* fd = new KFileDialog( Project::ref()->projectBaseURL().url(), "*.*", this, "file dialog", TRUE );
+  
+  KFileDialog fd( Project::ref()->projectBaseURL().url(), "*.*", this, "file dialog", TRUE );
   switch(m_resourceType) {
     case image :   {
-                             fd->setFilter( "*.png *.gif *.jpg *.mng|" + i18n("Image Files (*.png *.gif *.jpg *.mng)") +"\n*|" + i18n("All Files") );
-                             KImageFilePreview *ip = new KImageFilePreview( fd );
-                             fd->setPreviewWidget( ip );
-                            }
+                             fd.setFilter( "*.png *.gif *.jpg *.mng|" + i18n("Image files") +" (*.png *.gif *.jpg *.mng)\n*.*|" + i18n("All files")+(" (*.*)") );
+                             KImageFilePreview *ip = new KImageFilePreview( &fd );
+                             fd.setPreviewWidget( ip );
+                            } 
                              break;
-    case audio :  fd->setFilter( "*.au *.aiff *.wav|" + i18n("Audio Files (*.au *.aiff *.wav)")+"\n*|" + i18n("All Files") );break;
-    //case mousePointer :   fd->setFilter( "*.|" + i18n("Mouse Pointers (*.)")+"\n*|" + i18n("All Files") );break;
-    case mousePointer :   fd->setFilter( "*|" + i18n("All Files") );break;
+    case audio : {
+                           fd.setFilter( "*.au *.aiff *.wav|" + i18n("Audio files")+" (*.au *.aiff *.wav)\n*.*|" + i18n("All files")+(" (*.*)") );
 
+    
+                         }
+                         break; 
+  //case mousePointer :   fd.setFilter( "*.|" + i18n("Mouse Pointers (*.)")+"\n*.*|" + i18n("All files (*.*)") );break;
+    case mousePointer :   fd.setFilter( "*.*|" + i18n("All files")+(" (*.*)") );break;
+    
     default:;
   }
-
-  bool multi=false;
-
-  if( m_Mode == Single) fd->setMode(1);
-  else {
-    fd->setMode(4);
-    multi=true;
-  }
-
-  if( fd->exec() ){
-    if( !multi)
-      URI( fd->selectedFile() );
+    
+  if( m_Mode == Single) 
+    fd.setMode(KFile::File); 
+  else 
+    fd.setMode(KFile::Files);
+ 
+  
+  if( fd.exec() ){
+    if( fd.mode() == KFile::File )
+      selectedURI( fd.selectedFile() );
     else {
-      QStringList selectedFiles = fd->selectedFiles();
+      selectedURIs( fd.selectedFiles() );
+      /*QStringList selectedFiles = fd.selectedFiles();
       KURL u;
-      for ( QStringList::Iterator it = selectedFiles.begin(); it != selectedFiles.end(); ++it )
-      {
-        u.setPath(*it);
+      for ( QStringList::Iterator it = selectedFiles.begin(); it != selectedFiles.end(); ++it ){      
+        u.setPath(*it);   
         m_sFiles.append( "url(\'" + QExtFileInfo::toRelative(u, quantaApp->projectBaseURL()).path() + "\')");
       }
-      emit valueChanged(m_sFiles.join(","));
+      emit valueChanged(m_sFiles.join(","));*/
     }
   }
-  delete fd;
 }
 
 fontEditor::fontEditor(QWidget *parent, const char* name) : TLPEditor(parent,name), m_initialValue(QString::null){
-  setLabelText(i18n( " Font  family :" ));
+  QString whatsthis =i18n("With this line edit you can insert the name of the font you want to use");  
+  setWhatsThis(whatsthis);
+  setLabelText(i18n(" Font  family :"));
   setButtonIcon("fonts");
   setToolTip(i18n("Open font family chooser"));
   connect(m_pb, SIGNAL(clicked()), this, SLOT(openFontChooser()));
   connect(m_le, SIGNAL(textChanged ( const QString & )), this, SIGNAL( valueChanged( const QString& ) ) );
 }
 
+void fontEditor::connectToPropertySetter(propertySetter* p){
+  connect(this, SIGNAL(valueChanged(const QString&)), p, SIGNAL(valueChanged(const QString&))); 
+}
+
 void fontEditor::openFontChooser(){
-  fontFamilyChooser *dlg = new fontFamilyChooser( this );
-  dlg->setInitialValue(m_initialValue);
-  if( dlg->exec() == QDialog::Accepted ){
-    emit valueChanged( dlg->fontList().join(", "));
-  }
-  delete dlg;
+  fontFamilyChooser dlg( this );
+  dlg.setInitialValue(m_initialValue);
+  if( dlg.exec() )
+    emit valueChanged( dlg.fontList().join(", "));
 }
 
 #include "tlpeditors.moc"
diff --recursive -uP /usr/CVS_KDE/kdewebdev/quanta/components/csseditor/tlpeditors.h /home/simone/Desktop/kdewebdev/quanta/components/csseditor/tlpeditors.h
--- /usr/CVS_KDE/kdewebdev/quanta/components/csseditor/tlpeditors.h	2004-09-14 23:12:56.000000000 +0200
+++ /home/simone/Desktop/kdewebdev/quanta/components/csseditor/tlpeditors.h	2004-08-17 12:13:18.000000000 +0200
@@ -18,7 +18,9 @@
 #ifndef TLPEDITORS_H
 #define TLPEDITORS_H
 
-#include <qhbox.h>
+#include "minieditor.h"
+#include "propertysetter.h"
+
 class KPushButton;
 class QLineEdit;
 class QLabel;
@@ -27,7 +29,7 @@
   */
 
 
-class TLPEditor : public QHBox { //editor with a line text and a button calling a dialog
+class TLPEditor : public miniEditor { //editor with a line text and a button calling a dialog
   Q_OBJECT
 
   protected:
@@ -41,9 +43,11 @@
     virtual void setButtonIcon(QString);
     void setToolTip(QString);
     void setLabelText(QString);
+    void setWhatsThis(QString);
     QLineEdit* lineEdit() const { return m_le; }
     KPushButton* button() const { return m_pb; }
-    virtual void setInitialValue(const QString& s){Q_UNUSED(s);}
+    virtual void setInitialValue(const QString& s)=0;
+    virtual void connectToPropertySetter(propertySetter* p)=0;
 
   signals:
     void valueChanged(const QString&);
@@ -53,10 +57,11 @@
   Q_OBJECT
   private:
     QString m_initialValue;
-
+    
   public:
     fontEditor(QWidget *parent, const char* name=0);
     virtual void setInitialValue(const QString& s) { m_initialValue = s; }
+    virtual void connectToPropertySetter(propertySetter* p);
 
   public slots:
     void openFontChooser();
@@ -69,18 +74,19 @@
     enum URIResourceType{ audio, image, mousePointer };
 
   private:
-    QStringList m_sFiles;
     mode m_Mode;
     URIResourceType m_resourceType;
 
   public:
     URIEditor(QWidget *parent, const char* name=0);
-    void setMode(const mode& m) { m_Mode = m ; }
+    void setMode(const mode& m);
     void setResourceType(const  URIResourceType& r) { m_resourceType = r ; }
-    virtual void setInitialValue(const QString& s){Q_UNUSED(s);}
+    virtual void setInitialValue(const QString& s){}
+    virtual void connectToPropertySetter(propertySetter* p);
 
   public slots:
-    void URI(const QString&);
+    void selectedURI(const QString&);
+    void selectedURIs(const QStringList&);
     void openFileDialog();
 };
 
